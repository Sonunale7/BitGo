{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/messageService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":13,"column":36,"index":309}}],"key":"BgocpR5elj5+H74kAotl+BD0mA8=","exportNames":["*"],"imports":1}},{"name":"../services/networkService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":310},"end":{"line":14,"column":70,"index":380}}],"key":"9oYCR1OK4qlJRMTdqxwx0Wbqa1Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useChat\", {\n    enumerable: true,\n    get: function () {\n      return useChat;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesMessageService = require(_dependencyMap[1], \"../services/messageService\");\n  var _servicesNetworkService = require(_dependencyMap[2], \"../services/networkService\");\n  const useChat = (currentUserPhone, otherUserPhone) => {\n    _s();\n    const [messages, setMessages] = (0, _react.useState)([]);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const chatId = (0, _servicesMessageService.getChatId)(currentUserPhone, otherUserPhone);\n    const unsubscribeRef = (0, _react.useRef)(null);\n    const knownMessageIdsRef = (0, _react.useRef)(new Set());\n    const isMountedRef = (0, _react.useRef)(true);\n    const isSubscribedRef = (0, _react.useRef)(false);\n\n    // Handle status updates from queue processor - update only the specific message\n    const handleStatusUpdate = (0, _react.useCallback)((messageId, msgChatId, status) => {\n      if (!isMountedRef.current) return;\n      if (msgChatId === chatId) {\n        setMessages(prev => {\n          const idx = prev.findIndex(m => m.id === messageId);\n          if (idx === -1 || prev[idx].status === status) return prev;\n          const updated = [...prev];\n          updated[idx] = Object.assign({}, updated[idx], {\n            status\n          });\n          return updated;\n        });\n      }\n    }, [chatId]);\n    const {\n      isOnline,\n      queueLength\n    } = (0, _servicesNetworkService.useMessageQueueProcessor)(handleStatusUpdate);\n\n    // Load local messages on mount - no refetch on updates\n    (0, _react.useEffect)(() => {\n      isMountedRef.current = true;\n      isSubscribedRef.current = false;\n      const loadMessages = async () => {\n        if (!isMountedRef.current) return;\n        setIsLoading(true);\n        const localMessages = await (0, _servicesMessageService.getLocalMessages)(chatId);\n        if (!isMountedRef.current) return;\n        setMessages(localMessages);\n\n        // Build known message IDs set to prevent duplicates\n        knownMessageIdsRef.current = new Set(localMessages.map(m => m.id));\n        setIsLoading(false);\n\n        // Prevent duplicate listener subscription\n        if (isSubscribedRef.current) return;\n        isSubscribedRef.current = true;\n\n        // Subscribe to new messages from Firebase with limitToLast(30)\n        const lastTimestamp = localMessages.length > 0 ? Math.max(...localMessages.map(m => m.timestamp)) : 0;\n        unsubscribeRef.current = (0, _servicesMessageService.subscribeToNewMessages)(chatId, lastTimestamp, async newMessage => {\n          if (!isMountedRef.current) return;\n\n          // Skip if already known (duplicate prevention)\n          if (knownMessageIdsRef.current.has(newMessage.id)) {\n            return;\n          }\n\n          // Only add if not from current user (avoid duplicates)\n          if (newMessage.sender !== currentUserPhone) {\n            knownMessageIdsRef.current.add(newMessage.id);\n            await (0, _servicesMessageService.addMessageLocally)(chatId, newMessage);\n            if (!isMountedRef.current) return;\n\n            // Update state without refetching entire chat\n            setMessages(prev => {\n              if (prev.find(m => m.id === newMessage.id)) return prev;\n              return [...prev, newMessage].sort((a, b) => a.timestamp - b.timestamp);\n            });\n          }\n        }, knownMessageIdsRef.current);\n      };\n      if (currentUserPhone && otherUserPhone) {\n        loadMessages();\n      }\n\n      // Cleanup on unmount\n      return () => {\n        isMountedRef.current = false;\n        isSubscribedRef.current = false;\n        if (unsubscribeRef.current) {\n          unsubscribeRef.current();\n          unsubscribeRef.current = null;\n        }\n      };\n    }, [chatId, currentUserPhone, otherUserPhone]);\n\n    // Send message - local first approach, uses same messageId on retry\n    const sendMessage = (0, _react.useCallback)(async text => {\n      if (!text.trim() || !isMountedRef.current) return;\n      const messageId = (0, _servicesMessageService.generateMessageId)();\n      const message = {\n        id: messageId,\n        text: text.trim(),\n        sender: currentUserPhone,\n        timestamp: Date.now(),\n        status: 'sending'\n      };\n\n      // Track this message ID to prevent duplicates\n      knownMessageIdsRef.current.add(messageId);\n\n      // 1. Add to local state immediately (instant feedback)\n      setMessages(prev => [...prev, message]);\n\n      // 2. Save to local storage\n      await (0, _servicesMessageService.addMessageLocally)(chatId, message);\n\n      // 3. Try to send to Firebase (same messageId used for retry)\n      const success = await (0, _servicesMessageService.sendMessageToFirebase)(chatId, message);\n      if (!isMountedRef.current) return;\n      if (success) {\n        // Update only status, not refetch\n        await (0, _servicesMessageService.updateMessageStatusLocally)(chatId, message.id, 'sent');\n        setMessages(prev => {\n          const idx = prev.findIndex(m => m.id === message.id);\n          if (idx === -1) return prev;\n          const updated = [...prev];\n          updated[idx] = Object.assign({}, updated[idx], {\n            status: 'sent'\n          });\n          return updated;\n        });\n      } else {\n        // Add to queue for retry - uses same messageId\n        await (0, _servicesMessageService.addToQueue)(chatId, message);\n        await (0, _servicesMessageService.updateMessageStatusLocally)(chatId, message.id, 'queued');\n        setMessages(prev => {\n          const idx = prev.findIndex(m => m.id === message.id);\n          if (idx === -1) return prev;\n          const updated = [...prev];\n          updated[idx] = Object.assign({}, updated[idx], {\n            status: 'queued'\n          });\n          return updated;\n        });\n      }\n    }, [chatId, currentUserPhone]);\n    return {\n      messages,\n      sendMessage,\n      isLoading,\n      isOnline,\n      queueLength,\n      chatId\n    };\n  };\n  _s(useChat, \"1CJuTRph22CUXlBYeEfUo12mix4=\", false, function () {\n    return [_servicesNetworkService.useMessageQueueProcessor];\n  });\n});","lineCount":168,"map":[[8,2,16,0,"Object"],[8,8,16,0],[8,9,16,0,"defineProperty"],[8,23,16,0],[8,24,16,0,"exports"],[8,31,16,0],[9,4,16,0,"enumerable"],[9,14,16,0],[10,4,16,0,"get"],[10,7,16,0],[10,18,16,0,"get"],[10,19,16,0],[11,6,16,0],[11,13,16,0,"useChat"],[11,20,16,0],[12,4,16,0],[13,2,16,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_servicesMessageService"],[15,29,2,0],[15,32,2,0,"require"],[15,39,2,0],[15,40,2,0,"_dependencyMap"],[15,54,2,0],[16,2,14,0],[16,6,14,0,"_servicesNetworkService"],[16,29,14,0],[16,32,14,0,"require"],[16,39,14,0],[16,40,14,0,"_dependencyMap"],[16,54,14,0],[17,2,16,7],[17,8,16,13,"useChat"],[17,15,16,20],[17,18,16,23,"useChat"],[17,19,16,24,"currentUserPhone"],[17,35,16,48],[17,37,16,50,"otherUserPhone"],[17,51,16,72],[17,56,16,77],[18,4,16,77,"_s"],[18,6,16,77],[19,4,17,2],[19,10,17,8],[19,11,17,9,"messages"],[19,19,17,17],[19,21,17,19,"setMessages"],[19,32,17,30],[19,33,17,31],[19,36,17,34],[19,40,17,34,"useState"],[19,46,17,42],[19,47,17,42,"useState"],[19,55,17,42],[19,57,17,54],[19,59,17,56],[19,60,17,57],[20,4,18,2],[20,10,18,8],[20,11,18,9,"isLoading"],[20,20,18,18],[20,22,18,20,"setIsLoading"],[20,34,18,32],[20,35,18,33],[20,38,18,36],[20,42,18,36,"useState"],[20,48,18,44],[20,49,18,44,"useState"],[20,57,18,44],[20,59,18,45],[20,63,18,49],[20,64,18,50],[21,4,19,2],[21,10,19,8,"chatId"],[21,16,19,14],[21,19,19,17],[21,23,19,17,"getChatId"],[21,46,19,26],[21,47,19,26,"getChatId"],[21,56,19,26],[21,58,19,27,"currentUserPhone"],[21,74,19,43],[21,76,19,45,"otherUserPhone"],[21,90,19,59],[21,91,19,60],[22,4,20,2],[22,10,20,8,"unsubscribeRef"],[22,24,20,22],[22,27,20,25],[22,31,20,25,"useRef"],[22,37,20,31],[22,38,20,31,"useRef"],[22,44,20,31],[22,46,20,53],[22,50,20,57],[22,51,20,58],[23,4,21,2],[23,10,21,8,"knownMessageIdsRef"],[23,28,21,26],[23,31,21,29],[23,35,21,29,"useRef"],[23,41,21,35],[23,42,21,35,"useRef"],[23,48,21,35],[23,50,21,49],[23,54,21,53,"Set"],[23,57,21,56],[23,58,21,57],[23,59,21,58],[23,60,21,59],[24,4,22,2],[24,10,22,8,"isMountedRef"],[24,22,22,20],[24,25,22,23],[24,29,22,23,"useRef"],[24,35,22,29],[24,36,22,29,"useRef"],[24,42,22,29],[24,44,22,30],[24,48,22,34],[24,49,22,35],[25,4,23,2],[25,10,23,8,"isSubscribedRef"],[25,25,23,23],[25,28,23,26],[25,32,23,26,"useRef"],[25,38,23,32],[25,39,23,32,"useRef"],[25,45,23,32],[25,47,23,33],[25,52,23,38],[25,53,23,39],[27,4,25,2],[28,4,26,2],[28,10,26,8,"handleStatusUpdate"],[28,28,26,26],[28,31,26,29],[28,35,26,29,"useCallback"],[28,41,26,40],[28,42,26,40,"useCallback"],[28,53,26,40],[28,55,26,41],[28,56,26,42,"messageId"],[28,65,26,59],[28,67,26,61,"msgChatId"],[28,76,26,78],[28,78,26,80,"status"],[28,84,26,105],[28,89,26,110],[29,6,27,4],[29,10,27,8],[29,11,27,9,"isMountedRef"],[29,23,27,21],[29,24,27,22,"current"],[29,31,27,29],[29,33,27,31],[30,6,28,4],[30,10,28,8,"msgChatId"],[30,19,28,17],[30,24,28,22,"chatId"],[30,30,28,28],[30,32,28,30],[31,8,29,6,"setMessages"],[31,19,29,17],[31,20,29,18,"prev"],[31,24,29,22],[31,28,29,26],[32,10,30,8],[32,16,30,14,"idx"],[32,19,30,17],[32,22,30,20,"prev"],[32,26,30,24],[32,27,30,25,"findIndex"],[32,36,30,34],[32,37,30,35,"m"],[32,38,30,36],[32,42,30,40,"m"],[32,43,30,41],[32,44,30,42,"id"],[32,46,30,44],[32,51,30,49,"messageId"],[32,60,30,58],[32,61,30,59],[33,10,31,8],[33,14,31,12,"idx"],[33,17,31,15],[33,22,31,20],[33,23,31,21],[33,24,31,22],[33,28,31,26,"prev"],[33,32,31,30],[33,33,31,31,"idx"],[33,36,31,34],[33,37,31,35],[33,38,31,36,"status"],[33,44,31,42],[33,49,31,47,"status"],[33,55,31,53],[33,57,31,55],[33,64,31,62,"prev"],[33,68,31,66],[34,10,32,8],[34,16,32,14,"updated"],[34,23,32,21],[34,26,32,24],[34,27,32,25],[34,30,32,28,"prev"],[34,34,32,32],[34,35,32,33],[35,10,33,8,"updated"],[35,17,33,15],[35,18,33,16,"idx"],[35,21,33,19],[35,22,33,20],[35,25,33,20,"Object"],[35,31,33,20],[35,32,33,20,"assign"],[35,38,33,20],[35,43,33,28,"updated"],[35,50,33,35],[35,51,33,36,"idx"],[35,54,33,39],[35,55,33,40],[36,12,33,42,"status"],[37,10,33,48],[37,12,33,50],[38,10,34,8],[38,17,34,15,"updated"],[38,24,34,22],[39,8,35,6],[39,9,35,7],[39,10,35,8],[40,6,36,4],[41,4,37,2],[41,5,37,3],[41,7,37,5],[41,8,37,6,"chatId"],[41,14,37,12],[41,15,37,13],[41,16,37,14],[42,4,39,2],[42,10,39,8],[43,6,39,10,"isOnline"],[43,14,39,18],[44,6,39,20,"queueLength"],[45,4,39,32],[45,5,39,33],[45,8,39,36],[45,12,39,36,"useMessageQueueProcessor"],[45,35,39,60],[45,36,39,60,"useMessageQueueProcessor"],[45,60,39,60],[45,62,39,61,"handleStatusUpdate"],[45,80,39,79],[45,81,39,80],[47,4,41,2],[48,4,42,2],[48,8,42,2,"useEffect"],[48,14,42,11],[48,15,42,11,"useEffect"],[48,24,42,11],[48,26,42,12],[48,32,42,18],[49,6,43,4,"isMountedRef"],[49,18,43,16],[49,19,43,17,"current"],[49,26,43,24],[49,29,43,27],[49,33,43,31],[50,6,44,4,"isSubscribedRef"],[50,21,44,19],[50,22,44,20,"current"],[50,29,44,27],[50,32,44,30],[50,37,44,35],[51,6,46,4],[51,12,46,10,"loadMessages"],[51,24,46,22],[51,27,46,25],[51,33,46,25,"loadMessages"],[51,34,46,25],[51,39,46,37],[52,8,47,6],[52,12,47,10],[52,13,47,11,"isMountedRef"],[52,25,47,23],[52,26,47,24,"current"],[52,33,47,31],[52,35,47,33],[53,8,49,6,"setIsLoading"],[53,20,49,18],[53,21,49,19],[53,25,49,23],[53,26,49,24],[54,8,50,6],[54,14,50,12,"localMessages"],[54,27,50,25],[54,30,50,28],[54,36,50,34],[54,40,50,34,"getLocalMessages"],[54,63,50,50],[54,64,50,50,"getLocalMessages"],[54,80,50,50],[54,82,50,51,"chatId"],[54,88,50,57],[54,89,50,58],[55,8,52,6],[55,12,52,10],[55,13,52,11,"isMountedRef"],[55,25,52,23],[55,26,52,24,"current"],[55,33,52,31],[55,35,52,33],[56,8,54,6,"setMessages"],[56,19,54,17],[56,20,54,18,"localMessages"],[56,33,54,31],[56,34,54,32],[58,8,56,6],[59,8,57,6,"knownMessageIdsRef"],[59,26,57,24],[59,27,57,25,"current"],[59,34,57,32],[59,37,57,35],[59,41,57,39,"Set"],[59,44,57,42],[59,45,57,43,"localMessages"],[59,58,57,56],[59,59,57,57,"map"],[59,62,57,60],[59,63,57,61,"m"],[59,64,57,62],[59,68,57,66,"m"],[59,69,57,67],[59,70,57,68,"id"],[59,72,57,70],[59,73,57,71],[59,74,57,72],[60,8,59,6,"setIsLoading"],[60,20,59,18],[60,21,59,19],[60,26,59,24],[60,27,59,25],[62,8,61,6],[63,8,62,6],[63,12,62,10,"isSubscribedRef"],[63,27,62,25],[63,28,62,26,"current"],[63,35,62,33],[63,37,62,35],[64,8,63,6,"isSubscribedRef"],[64,23,63,21],[64,24,63,22,"current"],[64,31,63,29],[64,34,63,32],[64,38,63,36],[66,8,65,6],[67,8,66,6],[67,14,66,12,"lastTimestamp"],[67,27,66,25],[67,30,66,28,"localMessages"],[67,43,66,41],[67,44,66,42,"length"],[67,50,66,48],[67,53,66,51],[67,54,66,52],[67,57,67,10,"Math"],[67,61,67,14],[67,62,67,15,"max"],[67,65,67,18],[67,66,67,19],[67,69,67,22,"localMessages"],[67,82,67,35],[67,83,67,36,"map"],[67,86,67,39],[67,87,67,40,"m"],[67,88,67,41],[67,92,67,45,"m"],[67,93,67,46],[67,94,67,47,"timestamp"],[67,103,67,56],[67,104,67,57],[67,105,67,58],[67,108,68,10],[67,109,68,11],[68,8,70,6,"unsubscribeRef"],[68,22,70,20],[68,23,70,21,"current"],[68,30,70,28],[68,33,70,31],[68,37,70,31,"subscribeToNewMessages"],[68,60,70,53],[68,61,70,53,"subscribeToNewMessages"],[68,83,70,53],[68,85,71,8,"chatId"],[68,91,71,14],[68,93,72,8,"lastTimestamp"],[68,106,72,21],[68,108,73,8],[68,114,73,15,"newMessage"],[68,124,73,25],[68,128,73,30],[69,10,74,10],[69,14,74,14],[69,15,74,15,"isMountedRef"],[69,27,74,27],[69,28,74,28,"current"],[69,35,74,35],[69,37,74,37],[71,10,76,10],[72,10,77,10],[72,14,77,14,"knownMessageIdsRef"],[72,32,77,32],[72,33,77,33,"current"],[72,40,77,40],[72,41,77,41,"has"],[72,44,77,44],[72,45,77,45,"newMessage"],[72,55,77,55],[72,56,77,56,"id"],[72,58,77,58],[72,59,77,59],[72,61,77,61],[73,12,78,12],[74,10,79,10],[76,10,81,10],[77,10,82,10],[77,14,82,14,"newMessage"],[77,24,82,24],[77,25,82,25,"sender"],[77,31,82,31],[77,36,82,36,"currentUserPhone"],[77,52,82,52],[77,54,82,54],[78,12,83,12,"knownMessageIdsRef"],[78,30,83,30],[78,31,83,31,"current"],[78,38,83,38],[78,39,83,39,"add"],[78,42,83,42],[78,43,83,43,"newMessage"],[78,53,83,53],[78,54,83,54,"id"],[78,56,83,56],[78,57,83,57],[79,12,84,12],[79,18,84,18],[79,22,84,18,"addMessageLocally"],[79,45,84,35],[79,46,84,35,"addMessageLocally"],[79,63,84,35],[79,65,84,36,"chatId"],[79,71,84,42],[79,73,84,44,"newMessage"],[79,83,84,54],[79,84,84,55],[80,12,86,12],[80,16,86,16],[80,17,86,17,"isMountedRef"],[80,29,86,29],[80,30,86,30,"current"],[80,37,86,37],[80,39,86,39],[82,12,88,12],[83,12,89,12,"setMessages"],[83,23,89,23],[83,24,89,24,"prev"],[83,28,89,28],[83,32,89,32],[84,14,90,14],[84,18,90,18,"prev"],[84,22,90,22],[84,23,90,23,"find"],[84,27,90,27],[84,28,90,28,"m"],[84,29,90,29],[84,33,90,33,"m"],[84,34,90,34],[84,35,90,35,"id"],[84,37,90,37],[84,42,90,42,"newMessage"],[84,52,90,52],[84,53,90,53,"id"],[84,55,90,55],[84,56,90,56],[84,58,90,58],[84,65,90,65,"prev"],[84,69,90,69],[85,14,91,14],[85,21,91,21],[85,22,91,22],[85,25,91,25,"prev"],[85,29,91,29],[85,31,91,31,"newMessage"],[85,41,91,41],[85,42,91,42],[85,43,91,43,"sort"],[85,47,91,47],[85,48,91,48],[85,49,91,49,"a"],[85,50,91,50],[85,52,91,52,"b"],[85,53,91,53],[85,58,91,58,"a"],[85,59,91,59],[85,60,91,60,"timestamp"],[85,69,91,69],[85,72,91,72,"b"],[85,73,91,73],[85,74,91,74,"timestamp"],[85,83,91,83],[85,84,91,84],[86,12,92,12],[86,13,92,13],[86,14,92,14],[87,10,93,10],[88,8,94,8],[88,9,94,9],[88,11,95,8,"knownMessageIdsRef"],[88,29,95,26],[88,30,95,27,"current"],[88,37,96,6],[88,38,96,7],[89,6,97,4],[89,7,97,5],[90,6,99,4],[90,10,99,8,"currentUserPhone"],[90,26,99,24],[90,30,99,28,"otherUserPhone"],[90,44,99,42],[90,46,99,44],[91,8,100,6,"loadMessages"],[91,20,100,18],[91,21,100,19],[91,22,100,20],[92,6,101,4],[94,6,103,4],[95,6,104,4],[95,13,104,11],[95,19,104,17],[96,8,105,6,"isMountedRef"],[96,20,105,18],[96,21,105,19,"current"],[96,28,105,26],[96,31,105,29],[96,36,105,34],[97,8,106,6,"isSubscribedRef"],[97,23,106,21],[97,24,106,22,"current"],[97,31,106,29],[97,34,106,32],[97,39,106,37],[98,8,107,6],[98,12,107,10,"unsubscribeRef"],[98,26,107,24],[98,27,107,25,"current"],[98,34,107,32],[98,36,107,34],[99,10,108,8,"unsubscribeRef"],[99,24,108,22],[99,25,108,23,"current"],[99,32,108,30],[99,33,108,31],[99,34,108,32],[100,10,109,8,"unsubscribeRef"],[100,24,109,22],[100,25,109,23,"current"],[100,32,109,30],[100,35,109,33],[100,39,109,37],[101,8,110,6],[102,6,111,4],[102,7,111,5],[103,4,112,2],[103,5,112,3],[103,7,112,5],[103,8,112,6,"chatId"],[103,14,112,12],[103,16,112,14,"currentUserPhone"],[103,32,112,30],[103,34,112,32,"otherUserPhone"],[103,48,112,46],[103,49,112,47],[103,50,112,48],[105,4,114,2],[106,4,115,2],[106,10,115,8,"sendMessage"],[106,21,115,19],[106,24,115,22],[106,28,115,22,"useCallback"],[106,34,115,33],[106,35,115,33,"useCallback"],[106,46,115,33],[106,48,115,34],[106,54,115,41,"text"],[106,58,115,53],[106,62,115,73],[107,6,116,4],[107,10,116,8],[107,11,116,9,"text"],[107,15,116,13],[107,16,116,14,"trim"],[107,20,116,18],[107,21,116,19],[107,22,116,20],[107,26,116,24],[107,27,116,25,"isMountedRef"],[107,39,116,37],[107,40,116,38,"current"],[107,47,116,45],[107,49,116,47],[108,6,118,4],[108,12,118,10,"messageId"],[108,21,118,19],[108,24,118,22],[108,28,118,22,"generateMessageId"],[108,51,118,39],[108,52,118,39,"generateMessageId"],[108,69,118,39],[108,71,118,40],[108,72,118,41],[109,6,119,4],[109,12,119,10,"message"],[109,19,119,26],[109,22,119,29],[110,8,120,6,"id"],[110,10,120,8],[110,12,120,10,"messageId"],[110,21,120,19],[111,8,121,6,"text"],[111,12,121,10],[111,14,121,12,"text"],[111,18,121,16],[111,19,121,17,"trim"],[111,23,121,21],[111,24,121,22],[111,25,121,23],[112,8,122,6,"sender"],[112,14,122,12],[112,16,122,14,"currentUserPhone"],[112,32,122,30],[113,8,123,6,"timestamp"],[113,17,123,15],[113,19,123,17,"Date"],[113,23,123,21],[113,24,123,22,"now"],[113,27,123,25],[113,28,123,26],[113,29,123,27],[114,8,124,6,"status"],[114,14,124,12],[114,16,124,14],[115,6,125,4],[115,7,125,5],[117,6,127,4],[118,6,128,4,"knownMessageIdsRef"],[118,24,128,22],[118,25,128,23,"current"],[118,32,128,30],[118,33,128,31,"add"],[118,36,128,34],[118,37,128,35,"messageId"],[118,46,128,44],[118,47,128,45],[120,6,130,4],[121,6,131,4,"setMessages"],[121,17,131,15],[121,18,131,16,"prev"],[121,22,131,20],[121,26,131,24],[121,27,131,25],[121,30,131,28,"prev"],[121,34,131,32],[121,36,131,34,"message"],[121,43,131,41],[121,44,131,42],[121,45,131,43],[123,6,133,4],[124,6,134,4],[124,12,134,10],[124,16,134,10,"addMessageLocally"],[124,39,134,27],[124,40,134,27,"addMessageLocally"],[124,57,134,27],[124,59,134,28,"chatId"],[124,65,134,34],[124,67,134,36,"message"],[124,74,134,43],[124,75,134,44],[126,6,136,4],[127,6,137,4],[127,12,137,10,"success"],[127,19,137,17],[127,22,137,20],[127,28,137,26],[127,32,137,26,"sendMessageToFirebase"],[127,55,137,47],[127,56,137,47,"sendMessageToFirebase"],[127,77,137,47],[127,79,137,48,"chatId"],[127,85,137,54],[127,87,137,56,"message"],[127,94,137,63],[127,95,137,64],[128,6,139,4],[128,10,139,8],[128,11,139,9,"isMountedRef"],[128,23,139,21],[128,24,139,22,"current"],[128,31,139,29],[128,33,139,31],[129,6,141,4],[129,10,141,8,"success"],[129,17,141,15],[129,19,141,17],[130,8,142,6],[131,8,143,6],[131,14,143,12],[131,18,143,12,"updateMessageStatusLocally"],[131,41,143,38],[131,42,143,38,"updateMessageStatusLocally"],[131,68,143,38],[131,70,143,39,"chatId"],[131,76,143,45],[131,78,143,47,"message"],[131,85,143,54],[131,86,143,55,"id"],[131,88,143,57],[131,90,143,59],[131,96,143,65],[131,97,143,66],[132,8,144,6,"setMessages"],[132,19,144,17],[132,20,144,18,"prev"],[132,24,144,22],[132,28,144,26],[133,10,145,8],[133,16,145,14,"idx"],[133,19,145,17],[133,22,145,20,"prev"],[133,26,145,24],[133,27,145,25,"findIndex"],[133,36,145,34],[133,37,145,35,"m"],[133,38,145,36],[133,42,145,40,"m"],[133,43,145,41],[133,44,145,42,"id"],[133,46,145,44],[133,51,145,49,"message"],[133,58,145,56],[133,59,145,57,"id"],[133,61,145,59],[133,62,145,60],[134,10,146,8],[134,14,146,12,"idx"],[134,17,146,15],[134,22,146,20],[134,23,146,21],[134,24,146,22],[134,26,146,24],[134,33,146,31,"prev"],[134,37,146,35],[135,10,147,8],[135,16,147,14,"updated"],[135,23,147,21],[135,26,147,24],[135,27,147,25],[135,30,147,28,"prev"],[135,34,147,32],[135,35,147,33],[136,10,148,8,"updated"],[136,17,148,15],[136,18,148,16,"idx"],[136,21,148,19],[136,22,148,20],[136,25,148,20,"Object"],[136,31,148,20],[136,32,148,20,"assign"],[136,38,148,20],[136,43,148,28,"updated"],[136,50,148,35],[136,51,148,36,"idx"],[136,54,148,39],[136,55,148,40],[137,12,148,42,"status"],[137,18,148,48],[137,20,148,50],[138,10,148,56],[138,12,148,58],[139,10,149,8],[139,17,149,15,"updated"],[139,24,149,22],[140,8,150,6],[140,9,150,7],[140,10,150,8],[141,6,151,4],[141,7,151,5],[141,13,151,11],[142,8,152,6],[143,8,153,6],[143,14,153,12],[143,18,153,12,"addToQueue"],[143,41,153,22],[143,42,153,22,"addToQueue"],[143,52,153,22],[143,54,153,23,"chatId"],[143,60,153,29],[143,62,153,31,"message"],[143,69,153,38],[143,70,153,39],[144,8,154,6],[144,14,154,12],[144,18,154,12,"updateMessageStatusLocally"],[144,41,154,38],[144,42,154,38,"updateMessageStatusLocally"],[144,68,154,38],[144,70,154,39,"chatId"],[144,76,154,45],[144,78,154,47,"message"],[144,85,154,54],[144,86,154,55,"id"],[144,88,154,57],[144,90,154,59],[144,98,154,67],[144,99,154,68],[145,8,155,6,"setMessages"],[145,19,155,17],[145,20,155,18,"prev"],[145,24,155,22],[145,28,155,26],[146,10,156,8],[146,16,156,14,"idx"],[146,19,156,17],[146,22,156,20,"prev"],[146,26,156,24],[146,27,156,25,"findIndex"],[146,36,156,34],[146,37,156,35,"m"],[146,38,156,36],[146,42,156,40,"m"],[146,43,156,41],[146,44,156,42,"id"],[146,46,156,44],[146,51,156,49,"message"],[146,58,156,56],[146,59,156,57,"id"],[146,61,156,59],[146,62,156,60],[147,10,157,8],[147,14,157,12,"idx"],[147,17,157,15],[147,22,157,20],[147,23,157,21],[147,24,157,22],[147,26,157,24],[147,33,157,31,"prev"],[147,37,157,35],[148,10,158,8],[148,16,158,14,"updated"],[148,23,158,21],[148,26,158,24],[148,27,158,25],[148,30,158,28,"prev"],[148,34,158,32],[148,35,158,33],[149,10,159,8,"updated"],[149,17,159,15],[149,18,159,16,"idx"],[149,21,159,19],[149,22,159,20],[149,25,159,20,"Object"],[149,31,159,20],[149,32,159,20,"assign"],[149,38,159,20],[149,43,159,28,"updated"],[149,50,159,35],[149,51,159,36,"idx"],[149,54,159,39],[149,55,159,40],[150,12,159,42,"status"],[150,18,159,48],[150,20,159,50],[151,10,159,58],[151,12,159,60],[152,10,160,8],[152,17,160,15,"updated"],[152,24,160,22],[153,8,161,6],[153,9,161,7],[153,10,161,8],[154,6,162,4],[155,4,163,2],[155,5,163,3],[155,7,163,5],[155,8,163,6,"chatId"],[155,14,163,12],[155,16,163,14,"currentUserPhone"],[155,32,163,30],[155,33,163,31],[155,34,163,32],[156,4,165,2],[156,11,165,9],[157,6,166,4,"messages"],[157,14,166,12],[158,6,167,4,"sendMessage"],[158,17,167,15],[159,6,168,4,"isLoading"],[159,15,168,13],[160,6,169,4,"isOnline"],[160,14,169,12],[161,6,170,4,"queueLength"],[161,17,170,15],[162,6,171,4,"chatId"],[163,4,172,2],[163,5,172,3],[164,2,173,0],[164,3,173,1],[165,2,173,2,"_s"],[165,4,173,2],[165,5,16,13,"useChat"],[165,12,16,20],[166,4,16,20],[166,12,39,36,"useMessageQueueProcessor"],[166,35,39,60],[166,36,39,60,"useMessageQueueProcessor"],[166,60,39,60],[167,2,39,60],[168,0,39,60],[168,3]],"functionMap":{"names":["<global>","useChat","handleStatusUpdate","setMessages$argument_0","prev.findIndex$argument_0","useEffect$argument_0","loadMessages","localMessages.map$argument_0","subscribeToNewMessages$argument_2","prev.find$argument_0","sort$argument_0","<anonymous>","sendMessage"],"mappings":"AAA;uBCe;yCCU;kBCG;mCCC,uBD;ODK;GDE;YIK;yBCI;6DCW,SD;wCCU,gBD;QEM;wBLgB;4BMC,2BN;gDOC,mCP;aKC;SFE;KDG;WMO;KNO;GJC;kCWG;gBTgB,0BS;kBTa;mCCC,wBD;OSK;kBTK;mCCC,wBD;OSK;GXE;CDU"},"hasCjsExports":false},"type":"js/module"}]}