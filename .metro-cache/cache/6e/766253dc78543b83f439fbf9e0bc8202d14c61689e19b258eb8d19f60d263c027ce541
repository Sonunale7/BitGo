{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/messageService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":13,"column":36,"index":309}}],"key":"BgocpR5elj5+H74kAotl+BD0mA8=","exportNames":["*"],"imports":1}},{"name":"../services/networkService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":310},"end":{"line":14,"column":70,"index":380}}],"key":"9oYCR1OK4qlJRMTdqxwx0Wbqa1Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useChat\", {\n    enumerable: true,\n    get: function () {\n      return useChat;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _servicesMessageService = require(_dependencyMap[3], \"../services/messageService\");\n  var _servicesNetworkService = require(_dependencyMap[4], \"../services/networkService\");\n  var useChat = (currentUserPhone, otherUserPhone) => {\n    _s();\n    var _useState = (0, _react.useState)([]),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      messages = _useState2[0],\n      setMessages = _useState2[1];\n    var _useState3 = (0, _react.useState)(true),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n    var chatId = (0, _servicesMessageService.getChatId)(currentUserPhone, otherUserPhone);\n    var unsubscribeRef = (0, _react.useRef)(null);\n    var knownMessageIdsRef = (0, _react.useRef)(new Set());\n    var isMountedRef = (0, _react.useRef)(true);\n    var isSubscribedRef = (0, _react.useRef)(false);\n\n    // Handle status updates from queue processor - update only the specific message\n    var handleStatusUpdate = (0, _react.useCallback)((messageId, msgChatId, status) => {\n      if (!isMountedRef.current) return;\n      if (msgChatId === chatId) {\n        setMessages(prev => {\n          var idx = prev.findIndex(m => m.id === messageId);\n          if (idx === -1 || prev[idx].status === status) return prev;\n          var updated = [...prev];\n          updated[idx] = {\n            ...updated[idx],\n            status\n          };\n          return updated;\n        });\n      }\n    }, [chatId]);\n    var _useMessageQueueProce = (0, _servicesNetworkService.useMessageQueueProcessor)(handleStatusUpdate),\n      isOnline = _useMessageQueueProce.isOnline,\n      queueLength = _useMessageQueueProce.queueLength;\n\n    // Load local messages on mount - no refetch on updates\n    (0, _react.useEffect)(() => {\n      isMountedRef.current = true;\n      isSubscribedRef.current = false;\n      var loadMessages = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          if (!isMountedRef.current) return;\n          setIsLoading(true);\n          var localMessages = yield (0, _servicesMessageService.getLocalMessages)(chatId);\n          if (!isMountedRef.current) return;\n          setMessages(localMessages);\n\n          // Build known message IDs set to prevent duplicates\n          knownMessageIdsRef.current = new Set(localMessages.map(m => m.id));\n          setIsLoading(false);\n\n          // Prevent duplicate listener subscription\n          if (isSubscribedRef.current) return;\n          isSubscribedRef.current = true;\n\n          // Subscribe to new messages from Firebase with limitToLast(30)\n          var lastTimestamp = localMessages.length > 0 ? Math.max(...localMessages.map(m => m.timestamp)) : 0;\n          unsubscribeRef.current = (0, _servicesMessageService.subscribeToNewMessages)(chatId, lastTimestamp, /*#__PURE__*/function () {\n            var _ref2 = (0, _asyncToGenerator.default)(function* (newMessage) {\n              if (!isMountedRef.current) return;\n\n              // Skip if already known (duplicate prevention)\n              if (knownMessageIdsRef.current.has(newMessage.id)) {\n                return;\n              }\n\n              // Only add if not from current user (avoid duplicates)\n              if (newMessage.sender !== currentUserPhone) {\n                knownMessageIdsRef.current.add(newMessage.id);\n                yield (0, _servicesMessageService.addMessageLocally)(chatId, newMessage);\n                if (!isMountedRef.current) return;\n\n                // Update state without refetching entire chat\n                setMessages(prev => {\n                  if (prev.find(m => m.id === newMessage.id)) return prev;\n                  return [...prev, newMessage].sort((a, b) => a.timestamp - b.timestamp);\n                });\n              }\n            });\n            return function (_x) {\n              return _ref2.apply(this, arguments);\n            };\n          }(), knownMessageIdsRef.current);\n        });\n        return function loadMessages() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      if (currentUserPhone && otherUserPhone) {\n        loadMessages();\n      }\n\n      // Cleanup on unmount\n      return () => {\n        isMountedRef.current = false;\n        isSubscribedRef.current = false;\n        if (unsubscribeRef.current) {\n          unsubscribeRef.current();\n          unsubscribeRef.current = null;\n        }\n      };\n    }, [chatId, currentUserPhone, otherUserPhone]);\n\n    // Send message - local first approach, uses same messageId on retry\n    var sendMessage = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (text) {\n        if (!text.trim() || !isMountedRef.current) return;\n        var messageId = (0, _servicesMessageService.generateMessageId)();\n        var message = {\n          id: messageId,\n          text: text.trim(),\n          sender: currentUserPhone,\n          timestamp: Date.now(),\n          status: 'sending'\n        };\n\n        // Track this message ID to prevent duplicates\n        knownMessageIdsRef.current.add(messageId);\n\n        // 1. Add to local state immediately (instant feedback)\n        setMessages(prev => [...prev, message]);\n\n        // 2. Save to local storage\n        yield (0, _servicesMessageService.addMessageLocally)(chatId, message);\n\n        // 3. Try to send to Firebase (same messageId used for retry)\n        var success = yield (0, _servicesMessageService.sendMessageToFirebase)(chatId, message);\n        if (!isMountedRef.current) return;\n        if (success) {\n          // Update only status, not refetch\n          yield (0, _servicesMessageService.updateMessageStatusLocally)(chatId, message.id, 'sent');\n          setMessages(prev => {\n            var idx = prev.findIndex(m => m.id === message.id);\n            if (idx === -1) return prev;\n            var updated = [...prev];\n            updated[idx] = {\n              ...updated[idx],\n              status: 'sent'\n            };\n            return updated;\n          });\n        } else {\n          // Add to queue for retry - uses same messageId\n          yield (0, _servicesMessageService.addToQueue)(chatId, message);\n          yield (0, _servicesMessageService.updateMessageStatusLocally)(chatId, message.id, 'queued');\n          setMessages(prev => {\n            var idx = prev.findIndex(m => m.id === message.id);\n            if (idx === -1) return prev;\n            var updated = [...prev];\n            updated[idx] = {\n              ...updated[idx],\n              status: 'queued'\n            };\n            return updated;\n          });\n        }\n      });\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }(), [chatId, currentUserPhone]);\n    return {\n      messages,\n      sendMessage,\n      isLoading,\n      isOnline,\n      queueLength,\n      chatId\n    };\n  };\n  _s(useChat, \"1CJuTRph22CUXlBYeEfUo12mix4=\", false, function () {\n    return [_servicesNetworkService.useMessageQueueProcessor];\n  });\n});","lineCount":200,"map":[[13,2,16,0,"Object"],[13,8,16,0],[13,9,16,0,"defineProperty"],[13,23,16,0],[13,24,16,0,"exports"],[13,31,16,0],[14,4,16,0,"enumerable"],[14,14,16,0],[15,4,16,0,"get"],[15,7,16,0],[15,18,16,0,"get"],[15,19,16,0],[16,6,16,0],[16,13,16,0,"useChat"],[16,20,16,0],[17,4,16,0],[18,2,16,0],[19,2,173,2],[19,6,173,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,173,2],[19,45,173,2,"require"],[19,52,173,2],[19,53,173,2,"_dependencyMap"],[19,67,173,2],[20,2,173,2],[20,6,173,2,"_asyncToGenerator"],[20,23,173,2],[20,26,173,2,"_interopDefault"],[20,41,173,2],[20,42,173,2,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,173,2],[21,2,173,2],[21,6,173,2,"_babelRuntimeHelpersSlicedToArray"],[21,39,173,2],[21,42,173,2,"require"],[21,49,173,2],[21,50,173,2,"_dependencyMap"],[21,64,173,2],[22,2,173,2],[22,6,173,2,"_slicedToArray"],[22,20,173,2],[22,23,173,2,"_interopDefault"],[22,38,173,2],[22,39,173,2,"_babelRuntimeHelpersSlicedToArray"],[22,72,173,2],[23,2,1,0],[23,6,1,0,"_react"],[23,12,1,0],[23,15,1,0,"require"],[23,22,1,0],[23,23,1,0,"_dependencyMap"],[23,37,1,0],[24,2,2,0],[24,6,2,0,"_servicesMessageService"],[24,29,2,0],[24,32,2,0,"require"],[24,39,2,0],[24,40,2,0,"_dependencyMap"],[24,54,2,0],[25,2,14,0],[25,6,14,0,"_servicesNetworkService"],[25,29,14,0],[25,32,14,0,"require"],[25,39,14,0],[25,40,14,0,"_dependencyMap"],[25,54,14,0],[26,2,16,7],[26,6,16,13,"useChat"],[26,13,16,20],[26,16,16,23,"useChat"],[26,17,16,24,"currentUserPhone"],[26,33,16,48],[26,35,16,50,"otherUserPhone"],[26,49,16,72],[26,54,16,77],[27,4,16,77,"_s"],[27,6,16,77],[28,4,17,2],[28,8,17,2,"_useState"],[28,17,17,2],[28,20,17,34],[28,24,17,34,"useState"],[28,30,17,42],[28,31,17,42,"useState"],[28,39,17,42],[28,41,17,54],[28,43,17,56],[28,44,17,57],[29,6,17,57,"_useState2"],[29,16,17,57],[29,23,17,57,"_slicedToArray"],[29,37,17,57],[29,38,17,57,"default"],[29,45,17,57],[29,47,17,57,"_useState"],[29,56,17,57],[30,6,17,9,"messages"],[30,14,17,17],[30,17,17,17,"_useState2"],[30,27,17,17],[31,6,17,19,"setMessages"],[31,17,17,30],[31,20,17,30,"_useState2"],[31,30,17,30],[32,4,18,2],[32,8,18,2,"_useState3"],[32,18,18,2],[32,21,18,36],[32,25,18,36,"useState"],[32,31,18,44],[32,32,18,44,"useState"],[32,40,18,44],[32,42,18,45],[32,46,18,49],[32,47,18,50],[33,6,18,50,"_useState4"],[33,16,18,50],[33,23,18,50,"_slicedToArray"],[33,37,18,50],[33,38,18,50,"default"],[33,45,18,50],[33,47,18,50,"_useState3"],[33,57,18,50],[34,6,18,9,"isLoading"],[34,15,18,18],[34,18,18,18,"_useState4"],[34,28,18,18],[35,6,18,20,"setIsLoading"],[35,18,18,32],[35,21,18,32,"_useState4"],[35,31,18,32],[36,4,19,2],[36,8,19,8,"chatId"],[36,14,19,14],[36,17,19,17],[36,21,19,17,"getChatId"],[36,44,19,26],[36,45,19,26,"getChatId"],[36,54,19,26],[36,56,19,27,"currentUserPhone"],[36,72,19,43],[36,74,19,45,"otherUserPhone"],[36,88,19,59],[36,89,19,60],[37,4,20,2],[37,8,20,8,"unsubscribeRef"],[37,22,20,22],[37,25,20,25],[37,29,20,25,"useRef"],[37,35,20,31],[37,36,20,31,"useRef"],[37,42,20,31],[37,44,20,53],[37,48,20,57],[37,49,20,58],[38,4,21,2],[38,8,21,8,"knownMessageIdsRef"],[38,26,21,26],[38,29,21,29],[38,33,21,29,"useRef"],[38,39,21,35],[38,40,21,35,"useRef"],[38,46,21,35],[38,48,21,49],[38,52,21,53,"Set"],[38,55,21,56],[38,56,21,57],[38,57,21,58],[38,58,21,59],[39,4,22,2],[39,8,22,8,"isMountedRef"],[39,20,22,20],[39,23,22,23],[39,27,22,23,"useRef"],[39,33,22,29],[39,34,22,29,"useRef"],[39,40,22,29],[39,42,22,30],[39,46,22,34],[39,47,22,35],[40,4,23,2],[40,8,23,8,"isSubscribedRef"],[40,23,23,23],[40,26,23,26],[40,30,23,26,"useRef"],[40,36,23,32],[40,37,23,32,"useRef"],[40,43,23,32],[40,45,23,33],[40,50,23,38],[40,51,23,39],[42,4,25,2],[43,4,26,2],[43,8,26,8,"handleStatusUpdate"],[43,26,26,26],[43,29,26,29],[43,33,26,29,"useCallback"],[43,39,26,40],[43,40,26,40,"useCallback"],[43,51,26,40],[43,53,26,41],[43,54,26,42,"messageId"],[43,63,26,59],[43,65,26,61,"msgChatId"],[43,74,26,78],[43,76,26,80,"status"],[43,82,26,105],[43,87,26,110],[44,6,27,4],[44,10,27,8],[44,11,27,9,"isMountedRef"],[44,23,27,21],[44,24,27,22,"current"],[44,31,27,29],[44,33,27,31],[45,6,28,4],[45,10,28,8,"msgChatId"],[45,19,28,17],[45,24,28,22,"chatId"],[45,30,28,28],[45,32,28,30],[46,8,29,6,"setMessages"],[46,19,29,17],[46,20,29,18,"prev"],[46,24,29,22],[46,28,29,26],[47,10,30,8],[47,14,30,14,"idx"],[47,17,30,17],[47,20,30,20,"prev"],[47,24,30,24],[47,25,30,25,"findIndex"],[47,34,30,34],[47,35,30,35,"m"],[47,36,30,36],[47,40,30,40,"m"],[47,41,30,41],[47,42,30,42,"id"],[47,44,30,44],[47,49,30,49,"messageId"],[47,58,30,58],[47,59,30,59],[48,10,31,8],[48,14,31,12,"idx"],[48,17,31,15],[48,22,31,20],[48,23,31,21],[48,24,31,22],[48,28,31,26,"prev"],[48,32,31,30],[48,33,31,31,"idx"],[48,36,31,34],[48,37,31,35],[48,38,31,36,"status"],[48,44,31,42],[48,49,31,47,"status"],[48,55,31,53],[48,57,31,55],[48,64,31,62,"prev"],[48,68,31,66],[49,10,32,8],[49,14,32,14,"updated"],[49,21,32,21],[49,24,32,24],[49,25,32,25],[49,28,32,28,"prev"],[49,32,32,32],[49,33,32,33],[50,10,33,8,"updated"],[50,17,33,15],[50,18,33,16,"idx"],[50,21,33,19],[50,22,33,20],[50,25,33,23],[51,12,33,25],[51,15,33,28,"updated"],[51,22,33,35],[51,23,33,36,"idx"],[51,26,33,39],[51,27,33,40],[52,12,33,42,"status"],[53,10,33,49],[53,11,33,50],[54,10,34,8],[54,17,34,15,"updated"],[54,24,34,22],[55,8,35,6],[55,9,35,7],[55,10,35,8],[56,6,36,4],[57,4,37,2],[57,5,37,3],[57,7,37,5],[57,8,37,6,"chatId"],[57,14,37,12],[57,15,37,13],[57,16,37,14],[58,4,39,2],[58,8,39,2,"_useMessageQueueProce"],[58,29,39,2],[58,32,39,36],[58,36,39,36,"useMessageQueueProcessor"],[58,59,39,60],[58,60,39,60,"useMessageQueueProcessor"],[58,84,39,60],[58,86,39,61,"handleStatusUpdate"],[58,104,39,79],[58,105,39,80],[59,6,39,10,"isOnline"],[59,14,39,18],[59,17,39,18,"_useMessageQueueProce"],[59,38,39,18],[59,39,39,10,"isOnline"],[59,47,39,18],[60,6,39,20,"queueLength"],[60,17,39,31],[60,20,39,31,"_useMessageQueueProce"],[60,41,39,31],[60,42,39,20,"queueLength"],[60,53,39,31],[62,4,41,2],[63,4,42,2],[63,8,42,2,"useEffect"],[63,14,42,11],[63,15,42,11,"useEffect"],[63,24,42,11],[63,26,42,12],[63,32,42,18],[64,6,43,4,"isMountedRef"],[64,18,43,16],[64,19,43,17,"current"],[64,26,43,24],[64,29,43,27],[64,33,43,31],[65,6,44,4,"isSubscribedRef"],[65,21,44,19],[65,22,44,20,"current"],[65,29,44,27],[65,32,44,30],[65,37,44,35],[66,6,46,4],[66,10,46,10,"loadMessages"],[66,22,46,22],[67,8,46,22],[67,12,46,22,"_ref"],[67,16,46,22],[67,23,46,22,"_asyncToGenerator"],[67,40,46,22],[67,41,46,22,"default"],[67,48,46,22],[67,50,46,25],[67,63,46,37],[68,10,47,6],[68,14,47,10],[68,15,47,11,"isMountedRef"],[68,27,47,23],[68,28,47,24,"current"],[68,35,47,31],[68,37,47,33],[69,10,49,6,"setIsLoading"],[69,22,49,18],[69,23,49,19],[69,27,49,23],[69,28,49,24],[70,10,50,6],[70,14,50,12,"localMessages"],[70,27,50,25],[70,36,50,34],[70,40,50,34,"getLocalMessages"],[70,63,50,50],[70,64,50,50,"getLocalMessages"],[70,80,50,50],[70,82,50,51,"chatId"],[70,88,50,57],[70,89,50,58],[71,10,52,6],[71,14,52,10],[71,15,52,11,"isMountedRef"],[71,27,52,23],[71,28,52,24,"current"],[71,35,52,31],[71,37,52,33],[72,10,54,6,"setMessages"],[72,21,54,17],[72,22,54,18,"localMessages"],[72,35,54,31],[72,36,54,32],[74,10,56,6],[75,10,57,6,"knownMessageIdsRef"],[75,28,57,24],[75,29,57,25,"current"],[75,36,57,32],[75,39,57,35],[75,43,57,39,"Set"],[75,46,57,42],[75,47,57,43,"localMessages"],[75,60,57,56],[75,61,57,57,"map"],[75,64,57,60],[75,65,57,61,"m"],[75,66,57,62],[75,70,57,66,"m"],[75,71,57,67],[75,72,57,68,"id"],[75,74,57,70],[75,75,57,71],[75,76,57,72],[76,10,59,6,"setIsLoading"],[76,22,59,18],[76,23,59,19],[76,28,59,24],[76,29,59,25],[78,10,61,6],[79,10,62,6],[79,14,62,10,"isSubscribedRef"],[79,29,62,25],[79,30,62,26,"current"],[79,37,62,33],[79,39,62,35],[80,10,63,6,"isSubscribedRef"],[80,25,63,21],[80,26,63,22,"current"],[80,33,63,29],[80,36,63,32],[80,40,63,36],[82,10,65,6],[83,10,66,6],[83,14,66,12,"lastTimestamp"],[83,27,66,25],[83,30,66,28,"localMessages"],[83,43,66,41],[83,44,66,42,"length"],[83,50,66,48],[83,53,66,51],[83,54,66,52],[83,57,67,10,"Math"],[83,61,67,14],[83,62,67,15,"max"],[83,65,67,18],[83,66,67,19],[83,69,67,22,"localMessages"],[83,82,67,35],[83,83,67,36,"map"],[83,86,67,39],[83,87,67,40,"m"],[83,88,67,41],[83,92,67,45,"m"],[83,93,67,46],[83,94,67,47,"timestamp"],[83,103,67,56],[83,104,67,57],[83,105,67,58],[83,108,68,10],[83,109,68,11],[84,10,70,6,"unsubscribeRef"],[84,24,70,20],[84,25,70,21,"current"],[84,32,70,28],[84,35,70,31],[84,39,70,31,"subscribeToNewMessages"],[84,62,70,53],[84,63,70,53,"subscribeToNewMessages"],[84,85,70,53],[84,87,71,8,"chatId"],[84,93,71,14],[84,95,72,8,"lastTimestamp"],[84,108,72,21],[85,12,72,21],[85,16,72,21,"_ref2"],[85,21,72,21],[85,28,72,21,"_asyncToGenerator"],[85,45,72,21],[85,46,72,21,"default"],[85,53,72,21],[85,55,73,8],[85,66,73,15,"newMessage"],[85,76,73,25],[85,78,73,30],[86,14,74,10],[86,18,74,14],[86,19,74,15,"isMountedRef"],[86,31,74,27],[86,32,74,28,"current"],[86,39,74,35],[86,41,74,37],[88,14,76,10],[89,14,77,10],[89,18,77,14,"knownMessageIdsRef"],[89,36,77,32],[89,37,77,33,"current"],[89,44,77,40],[89,45,77,41,"has"],[89,48,77,44],[89,49,77,45,"newMessage"],[89,59,77,55],[89,60,77,56,"id"],[89,62,77,58],[89,63,77,59],[89,65,77,61],[90,16,78,12],[91,14,79,10],[93,14,81,10],[94,14,82,10],[94,18,82,14,"newMessage"],[94,28,82,24],[94,29,82,25,"sender"],[94,35,82,31],[94,40,82,36,"currentUserPhone"],[94,56,82,52],[94,58,82,54],[95,16,83,12,"knownMessageIdsRef"],[95,34,83,30],[95,35,83,31,"current"],[95,42,83,38],[95,43,83,39,"add"],[95,46,83,42],[95,47,83,43,"newMessage"],[95,57,83,53],[95,58,83,54,"id"],[95,60,83,56],[95,61,83,57],[96,16,84,12],[96,22,84,18],[96,26,84,18,"addMessageLocally"],[96,49,84,35],[96,50,84,35,"addMessageLocally"],[96,67,84,35],[96,69,84,36,"chatId"],[96,75,84,42],[96,77,84,44,"newMessage"],[96,87,84,54],[96,88,84,55],[97,16,86,12],[97,20,86,16],[97,21,86,17,"isMountedRef"],[97,33,86,29],[97,34,86,30,"current"],[97,41,86,37],[97,43,86,39],[99,16,88,12],[100,16,89,12,"setMessages"],[100,27,89,23],[100,28,89,24,"prev"],[100,32,89,28],[100,36,89,32],[101,18,90,14],[101,22,90,18,"prev"],[101,26,90,22],[101,27,90,23,"find"],[101,31,90,27],[101,32,90,28,"m"],[101,33,90,29],[101,37,90,33,"m"],[101,38,90,34],[101,39,90,35,"id"],[101,41,90,37],[101,46,90,42,"newMessage"],[101,56,90,52],[101,57,90,53,"id"],[101,59,90,55],[101,60,90,56],[101,62,90,58],[101,69,90,65,"prev"],[101,73,90,69],[102,18,91,14],[102,25,91,21],[102,26,91,22],[102,29,91,25,"prev"],[102,33,91,29],[102,35,91,31,"newMessage"],[102,45,91,41],[102,46,91,42],[102,47,91,43,"sort"],[102,51,91,47],[102,52,91,48],[102,53,91,49,"a"],[102,54,91,50],[102,56,91,52,"b"],[102,57,91,53],[102,62,91,58,"a"],[102,63,91,59],[102,64,91,60,"timestamp"],[102,73,91,69],[102,76,91,72,"b"],[102,77,91,73],[102,78,91,74,"timestamp"],[102,87,91,83],[102,88,91,84],[103,16,92,12],[103,17,92,13],[103,18,92,14],[104,14,93,10],[105,12,94,8],[105,13,94,9],[106,12,94,9],[106,29,94,9,"_x"],[106,31,94,9],[107,14,94,9],[107,21,94,9,"_ref2"],[107,26,94,9],[107,27,94,9,"apply"],[107,32,94,9],[107,39,94,9,"arguments"],[107,48,94,9],[108,12,94,9],[109,10,94,9],[109,15,95,8,"knownMessageIdsRef"],[109,33,95,26],[109,34,95,27,"current"],[109,41,96,6],[109,42,96,7],[110,8,97,4],[110,9,97,5],[111,8,97,5],[111,24,46,10,"loadMessages"],[111,36,46,22,"loadMessages"],[111,37,46,22],[112,10,46,22],[112,17,46,22,"_ref"],[112,21,46,22],[112,22,46,22,"apply"],[112,27,46,22],[112,34,46,22,"arguments"],[112,43,46,22],[113,8,46,22],[114,6,46,22],[114,9,97,5],[115,6,99,4],[115,10,99,8,"currentUserPhone"],[115,26,99,24],[115,30,99,28,"otherUserPhone"],[115,44,99,42],[115,46,99,44],[116,8,100,6,"loadMessages"],[116,20,100,18],[116,21,100,19],[116,22,100,20],[117,6,101,4],[119,6,103,4],[120,6,104,4],[120,13,104,11],[120,19,104,17],[121,8,105,6,"isMountedRef"],[121,20,105,18],[121,21,105,19,"current"],[121,28,105,26],[121,31,105,29],[121,36,105,34],[122,8,106,6,"isSubscribedRef"],[122,23,106,21],[122,24,106,22,"current"],[122,31,106,29],[122,34,106,32],[122,39,106,37],[123,8,107,6],[123,12,107,10,"unsubscribeRef"],[123,26,107,24],[123,27,107,25,"current"],[123,34,107,32],[123,36,107,34],[124,10,108,8,"unsubscribeRef"],[124,24,108,22],[124,25,108,23,"current"],[124,32,108,30],[124,33,108,31],[124,34,108,32],[125,10,109,8,"unsubscribeRef"],[125,24,109,22],[125,25,109,23,"current"],[125,32,109,30],[125,35,109,33],[125,39,109,37],[126,8,110,6],[127,6,111,4],[127,7,111,5],[128,4,112,2],[128,5,112,3],[128,7,112,5],[128,8,112,6,"chatId"],[128,14,112,12],[128,16,112,14,"currentUserPhone"],[128,32,112,30],[128,34,112,32,"otherUserPhone"],[128,48,112,46],[128,49,112,47],[128,50,112,48],[130,4,114,2],[131,4,115,2],[131,8,115,8,"sendMessage"],[131,19,115,19],[131,22,115,22],[131,26,115,22,"useCallback"],[131,32,115,33],[131,33,115,33,"useCallback"],[131,44,115,33],[132,6,115,33],[132,10,115,33,"_ref3"],[132,15,115,33],[132,22,115,33,"_asyncToGenerator"],[132,39,115,33],[132,40,115,33,"default"],[132,47,115,33],[132,49,115,34],[132,60,115,41,"text"],[132,64,115,53],[132,66,115,73],[133,8,116,4],[133,12,116,8],[133,13,116,9,"text"],[133,17,116,13],[133,18,116,14,"trim"],[133,22,116,18],[133,23,116,19],[133,24,116,20],[133,28,116,24],[133,29,116,25,"isMountedRef"],[133,41,116,37],[133,42,116,38,"current"],[133,49,116,45],[133,51,116,47],[134,8,118,4],[134,12,118,10,"messageId"],[134,21,118,19],[134,24,118,22],[134,28,118,22,"generateMessageId"],[134,51,118,39],[134,52,118,39,"generateMessageId"],[134,69,118,39],[134,71,118,40],[134,72,118,41],[135,8,119,4],[135,12,119,10,"message"],[135,19,119,26],[135,22,119,29],[136,10,120,6,"id"],[136,12,120,8],[136,14,120,10,"messageId"],[136,23,120,19],[137,10,121,6,"text"],[137,14,121,10],[137,16,121,12,"text"],[137,20,121,16],[137,21,121,17,"trim"],[137,25,121,21],[137,26,121,22],[137,27,121,23],[138,10,122,6,"sender"],[138,16,122,12],[138,18,122,14,"currentUserPhone"],[138,34,122,30],[139,10,123,6,"timestamp"],[139,19,123,15],[139,21,123,17,"Date"],[139,25,123,21],[139,26,123,22,"now"],[139,29,123,25],[139,30,123,26],[139,31,123,27],[140,10,124,6,"status"],[140,16,124,12],[140,18,124,14],[141,8,125,4],[141,9,125,5],[143,8,127,4],[144,8,128,4,"knownMessageIdsRef"],[144,26,128,22],[144,27,128,23,"current"],[144,34,128,30],[144,35,128,31,"add"],[144,38,128,34],[144,39,128,35,"messageId"],[144,48,128,44],[144,49,128,45],[146,8,130,4],[147,8,131,4,"setMessages"],[147,19,131,15],[147,20,131,16,"prev"],[147,24,131,20],[147,28,131,24],[147,29,131,25],[147,32,131,28,"prev"],[147,36,131,32],[147,38,131,34,"message"],[147,45,131,41],[147,46,131,42],[147,47,131,43],[149,8,133,4],[150,8,134,4],[150,14,134,10],[150,18,134,10,"addMessageLocally"],[150,41,134,27],[150,42,134,27,"addMessageLocally"],[150,59,134,27],[150,61,134,28,"chatId"],[150,67,134,34],[150,69,134,36,"message"],[150,76,134,43],[150,77,134,44],[152,8,136,4],[153,8,137,4],[153,12,137,10,"success"],[153,19,137,17],[153,28,137,26],[153,32,137,26,"sendMessageToFirebase"],[153,55,137,47],[153,56,137,47,"sendMessageToFirebase"],[153,77,137,47],[153,79,137,48,"chatId"],[153,85,137,54],[153,87,137,56,"message"],[153,94,137,63],[153,95,137,64],[154,8,139,4],[154,12,139,8],[154,13,139,9,"isMountedRef"],[154,25,139,21],[154,26,139,22,"current"],[154,33,139,29],[154,35,139,31],[155,8,141,4],[155,12,141,8,"success"],[155,19,141,15],[155,21,141,17],[156,10,142,6],[157,10,143,6],[157,16,143,12],[157,20,143,12,"updateMessageStatusLocally"],[157,43,143,38],[157,44,143,38,"updateMessageStatusLocally"],[157,70,143,38],[157,72,143,39,"chatId"],[157,78,143,45],[157,80,143,47,"message"],[157,87,143,54],[157,88,143,55,"id"],[157,90,143,57],[157,92,143,59],[157,98,143,65],[157,99,143,66],[158,10,144,6,"setMessages"],[158,21,144,17],[158,22,144,18,"prev"],[158,26,144,22],[158,30,144,26],[159,12,145,8],[159,16,145,14,"idx"],[159,19,145,17],[159,22,145,20,"prev"],[159,26,145,24],[159,27,145,25,"findIndex"],[159,36,145,34],[159,37,145,35,"m"],[159,38,145,36],[159,42,145,40,"m"],[159,43,145,41],[159,44,145,42,"id"],[159,46,145,44],[159,51,145,49,"message"],[159,58,145,56],[159,59,145,57,"id"],[159,61,145,59],[159,62,145,60],[160,12,146,8],[160,16,146,12,"idx"],[160,19,146,15],[160,24,146,20],[160,25,146,21],[160,26,146,22],[160,28,146,24],[160,35,146,31,"prev"],[160,39,146,35],[161,12,147,8],[161,16,147,14,"updated"],[161,23,147,21],[161,26,147,24],[161,27,147,25],[161,30,147,28,"prev"],[161,34,147,32],[161,35,147,33],[162,12,148,8,"updated"],[162,19,148,15],[162,20,148,16,"idx"],[162,23,148,19],[162,24,148,20],[162,27,148,23],[163,14,148,25],[163,17,148,28,"updated"],[163,24,148,35],[163,25,148,36,"idx"],[163,28,148,39],[163,29,148,40],[164,14,148,42,"status"],[164,20,148,48],[164,22,148,50],[165,12,148,57],[165,13,148,58],[166,12,149,8],[166,19,149,15,"updated"],[166,26,149,22],[167,10,150,6],[167,11,150,7],[167,12,150,8],[168,8,151,4],[168,9,151,5],[168,15,151,11],[169,10,152,6],[170,10,153,6],[170,16,153,12],[170,20,153,12,"addToQueue"],[170,43,153,22],[170,44,153,22,"addToQueue"],[170,54,153,22],[170,56,153,23,"chatId"],[170,62,153,29],[170,64,153,31,"message"],[170,71,153,38],[170,72,153,39],[171,10,154,6],[171,16,154,12],[171,20,154,12,"updateMessageStatusLocally"],[171,43,154,38],[171,44,154,38,"updateMessageStatusLocally"],[171,70,154,38],[171,72,154,39,"chatId"],[171,78,154,45],[171,80,154,47,"message"],[171,87,154,54],[171,88,154,55,"id"],[171,90,154,57],[171,92,154,59],[171,100,154,67],[171,101,154,68],[172,10,155,6,"setMessages"],[172,21,155,17],[172,22,155,18,"prev"],[172,26,155,22],[172,30,155,26],[173,12,156,8],[173,16,156,14,"idx"],[173,19,156,17],[173,22,156,20,"prev"],[173,26,156,24],[173,27,156,25,"findIndex"],[173,36,156,34],[173,37,156,35,"m"],[173,38,156,36],[173,42,156,40,"m"],[173,43,156,41],[173,44,156,42,"id"],[173,46,156,44],[173,51,156,49,"message"],[173,58,156,56],[173,59,156,57,"id"],[173,61,156,59],[173,62,156,60],[174,12,157,8],[174,16,157,12,"idx"],[174,19,157,15],[174,24,157,20],[174,25,157,21],[174,26,157,22],[174,28,157,24],[174,35,157,31,"prev"],[174,39,157,35],[175,12,158,8],[175,16,158,14,"updated"],[175,23,158,21],[175,26,158,24],[175,27,158,25],[175,30,158,28,"prev"],[175,34,158,32],[175,35,158,33],[176,12,159,8,"updated"],[176,19,159,15],[176,20,159,16,"idx"],[176,23,159,19],[176,24,159,20],[176,27,159,23],[177,14,159,25],[177,17,159,28,"updated"],[177,24,159,35],[177,25,159,36,"idx"],[177,28,159,39],[177,29,159,40],[178,14,159,42,"status"],[178,20,159,48],[178,22,159,50],[179,12,159,59],[179,13,159,60],[180,12,160,8],[180,19,160,15,"updated"],[180,26,160,22],[181,10,161,6],[181,11,161,7],[181,12,161,8],[182,8,162,4],[183,6,163,2],[183,7,163,3],[184,6,163,3],[184,23,163,3,"_x2"],[184,26,163,3],[185,8,163,3],[185,15,163,3,"_ref3"],[185,20,163,3],[185,21,163,3,"apply"],[185,26,163,3],[185,33,163,3,"arguments"],[185,42,163,3],[186,6,163,3],[187,4,163,3],[187,9,163,5],[187,10,163,6,"chatId"],[187,16,163,12],[187,18,163,14,"currentUserPhone"],[187,34,163,30],[187,35,163,31],[187,36,163,32],[188,4,165,2],[188,11,165,9],[189,6,166,4,"messages"],[189,14,166,12],[190,6,167,4,"sendMessage"],[190,17,167,15],[191,6,168,4,"isLoading"],[191,15,168,13],[192,6,169,4,"isOnline"],[192,14,169,12],[193,6,170,4,"queueLength"],[193,17,170,15],[194,6,171,4,"chatId"],[195,4,172,2],[195,5,172,3],[196,2,173,0],[196,3,173,1],[197,2,173,2,"_s"],[197,4,173,2],[197,5,16,13,"useChat"],[197,12,16,20],[198,4,16,20],[198,12,39,36,"useMessageQueueProcessor"],[198,35,39,60],[198,36,39,60,"useMessageQueueProcessor"],[198,60,39,60],[199,2,39,60],[200,0,39,60],[200,3]],"functionMap":{"names":["<global>","useChat","handleStatusUpdate","setMessages$argument_0","prev.findIndex$argument_0","useEffect$argument_0","loadMessages","localMessages.map$argument_0","subscribeToNewMessages$argument_2","prev.find$argument_0","sort$argument_0","<anonymous>","sendMessage"],"mappings":"AAA;uBCe;yCCU;kBCG;mCCC,uBD;ODK;GDE;YIK;yBCI;6DCW,SD;wCCU,gBD;QEM;wBLgB;4BMC,2BN;gDOC,mCP;aKC;SFE;KDG;WMO;KNO;GJC;kCWG;gBTgB,0BS;kBTa;mCCC,wBD;OSK;kBTK;mCCC,wBD;OSK;GXE;CDU"},"hasCjsExports":false},"type":"js/module"}]}