{"dependencies":[{"name":"firebase/database","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":59,"index":59}}],"key":"ZF/J3nfk5GUgbzXl84BqV1IxYEE=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":60},"end":{"line":2,"column":46,"index":106}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":69,"index":176}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"saveUserLocally\", {\n    enumerable: true,\n    get: function () {\n      return saveUserLocally;\n    }\n  });\n  Object.defineProperty(exports, \"getUserFromLocal\", {\n    enumerable: true,\n    get: function () {\n      return getUserFromLocal;\n    }\n  });\n  Object.defineProperty(exports, \"saveUserToFirebase\", {\n    enumerable: true,\n    get: function () {\n      return saveUserToFirebase;\n    }\n  });\n  Object.defineProperty(exports, \"setUserOnlineStatus\", {\n    enumerable: true,\n    get: function () {\n      return setUserOnlineStatus;\n    }\n  });\n  Object.defineProperty(exports, \"clearLocalUser\", {\n    enumerable: true,\n    get: function () {\n      return clearLocalUser;\n    }\n  });\n  var _firebaseDatabase = require(_dependencyMap[0], \"firebase/database\");\n  var _configFirebase = require(_dependencyMap[1], \"../config/firebase\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const USER_STORAGE_KEY = '@bitgo_user';\n  // Save user to local storage\n  const saveUserLocally = async user => {\n    try {\n      await AsyncStorage.default.setItem(USER_STORAGE_KEY, JSON.stringify(user));\n    } catch (error) {\n      console.error('Error saving user locally:', error);\n      throw error;\n    }\n  };\n\n  // Get user from local storage\n  const getUserFromLocal = async () => {\n    try {\n      const userData = await AsyncStorage.default.getItem(USER_STORAGE_KEY);\n      return userData ? JSON.parse(userData) : null;\n    } catch (error) {\n      console.error('Error getting user from local:', error);\n      return null;\n    }\n  };\n\n  // Save user to Firebase Realtime Database\n  const saveUserToFirebase = async user => {\n    try {\n      const userRef = (0, _firebaseDatabase.ref)(_configFirebase.database, `users/${user.phone}`);\n      await (0, _firebaseDatabase.set)(userRef, {\n        name: user.name,\n        online: true\n      });\n\n      // Set up onDisconnect to mark user as offline when connection is lost\n      const onlineRef = (0, _firebaseDatabase.ref)(_configFirebase.database, `users/${user.phone}/online`);\n      await (0, _firebaseDatabase.onDisconnect)(onlineRef).set(false);\n      console.log('User saved to Firebase successfully');\n    } catch (error) {\n      console.error('Error saving user to Firebase:', error);\n      throw error;\n    }\n  };\n\n  // Update user online status\n  const setUserOnlineStatus = async (phone, online) => {\n    try {\n      const onlineRef = (0, _firebaseDatabase.ref)(_configFirebase.database, `users/${phone}/online`);\n      await (0, _firebaseDatabase.set)(onlineRef, online);\n      console.log(`User ${phone} online status set to ${online}`);\n    } catch (error) {\n      console.error('Error updating online status:', error);\n      throw error;\n    }\n  };\n\n  // Clear local user data (for logout)\n  const clearLocalUser = async () => {\n    try {\n      await AsyncStorage.default.removeItem(USER_STORAGE_KEY);\n    } catch (error) {\n      console.error('Error clearing local user:', error);\n      throw error;\n    }\n  };\n});","lineCount":108,"map":[[12,2,13,0,"Object"],[12,8,13,0],[12,9,13,0,"defineProperty"],[12,23,13,0],[12,24,13,0,"exports"],[12,31,13,0],[13,4,13,0,"enumerable"],[13,14,13,0],[14,4,13,0,"get"],[14,7,13,0],[14,18,13,0,"get"],[14,19,13,0],[15,6,13,0],[15,13,13,0,"saveUserLocally"],[15,28,13,0],[16,4,13,0],[17,2,13,0],[18,2,23,0,"Object"],[18,8,23,0],[18,9,23,0,"defineProperty"],[18,23,23,0],[18,24,23,0,"exports"],[18,31,23,0],[19,4,23,0,"enumerable"],[19,14,23,0],[20,4,23,0,"get"],[20,7,23,0],[20,18,23,0,"get"],[20,19,23,0],[21,6,23,0],[21,13,23,0,"getUserFromLocal"],[21,29,23,0],[22,4,23,0],[23,2,23,0],[24,2,34,0,"Object"],[24,8,34,0],[24,9,34,0,"defineProperty"],[24,23,34,0],[24,24,34,0,"exports"],[24,31,34,0],[25,4,34,0,"enumerable"],[25,14,34,0],[26,4,34,0,"get"],[26,7,34,0],[26,18,34,0,"get"],[26,19,34,0],[27,6,34,0],[27,13,34,0,"saveUserToFirebase"],[27,31,34,0],[28,4,34,0],[29,2,34,0],[30,2,54,0,"Object"],[30,8,54,0],[30,9,54,0,"defineProperty"],[30,23,54,0],[30,24,54,0,"exports"],[30,31,54,0],[31,4,54,0,"enumerable"],[31,14,54,0],[32,4,54,0,"get"],[32,7,54,0],[32,18,54,0,"get"],[32,19,54,0],[33,6,54,0],[33,13,54,0,"setUserOnlineStatus"],[33,32,54,0],[34,4,54,0],[35,2,54,0],[36,2,66,0,"Object"],[36,8,66,0],[36,9,66,0,"defineProperty"],[36,23,66,0],[36,24,66,0,"exports"],[36,31,66,0],[37,4,66,0,"enumerable"],[37,14,66,0],[38,4,66,0,"get"],[38,7,66,0],[38,18,66,0,"get"],[38,19,66,0],[39,6,66,0],[39,13,66,0,"clearLocalUser"],[39,27,66,0],[40,4,66,0],[41,2,66,0],[42,2,1,0],[42,6,1,0,"_firebaseDatabase"],[42,23,1,0],[42,26,1,0,"require"],[42,33,1,0],[42,34,1,0,"_dependencyMap"],[42,48,1,0],[43,2,2,0],[43,6,2,0,"_configFirebase"],[43,21,2,0],[43,24,2,0,"require"],[43,31,2,0],[43,32,2,0,"_dependencyMap"],[43,46,2,0],[44,2,3,0],[44,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[44,42,3,0],[44,45,3,0,"require"],[44,52,3,0],[44,53,3,0,"_dependencyMap"],[44,67,3,0],[45,2,3,0],[45,6,3,0,"AsyncStorage"],[45,18,3,0],[45,21,3,0,"_interopDefault"],[45,36,3,0],[45,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[45,73,3,0],[46,2,5,0],[46,8,5,6,"USER_STORAGE_KEY"],[46,24,5,22],[46,27,5,25],[46,40,5,38],[47,2,12,0],[48,2,13,7],[48,8,13,13,"saveUserLocally"],[48,23,13,28],[48,26,13,31],[48,32,13,38,"user"],[48,36,13,48],[48,40,13,68],[49,4,14,2],[49,8,14,6],[50,6,15,4],[50,12,15,10,"AsyncStorage"],[50,24,15,22],[50,25,15,22,"default"],[50,32,15,22],[50,33,15,23,"setItem"],[50,40,15,30],[50,41,15,31,"USER_STORAGE_KEY"],[50,57,15,47],[50,59,15,49,"JSON"],[50,63,15,53],[50,64,15,54,"stringify"],[50,73,15,63],[50,74,15,64,"user"],[50,78,15,68],[50,79,15,69],[50,80,15,70],[51,4,16,2],[51,5,16,3],[51,6,16,4],[51,13,16,11,"error"],[51,18,16,16],[51,20,16,18],[52,6,17,4,"console"],[52,13,17,11],[52,14,17,12,"error"],[52,19,17,17],[52,20,17,18],[52,48,17,46],[52,50,17,48,"error"],[52,55,17,53],[52,56,17,54],[53,6,18,4],[53,12,18,10,"error"],[53,17,18,15],[54,4,19,2],[55,2,20,0],[55,3,20,1],[57,2,22,0],[58,2,23,7],[58,8,23,13,"getUserFromLocal"],[58,24,23,29],[58,27,23,32],[58,33,23,32,"getUserFromLocal"],[58,34,23,32],[58,39,23,66],[59,4,24,2],[59,8,24,6],[60,6,25,4],[60,12,25,10,"userData"],[60,20,25,18],[60,23,25,21],[60,29,25,27,"AsyncStorage"],[60,41,25,39],[60,42,25,39,"default"],[60,49,25,39],[60,50,25,40,"getItem"],[60,57,25,47],[60,58,25,48,"USER_STORAGE_KEY"],[60,74,25,64],[60,75,25,65],[61,6,26,4],[61,13,26,11,"userData"],[61,21,26,19],[61,24,26,22,"JSON"],[61,28,26,26],[61,29,26,27,"parse"],[61,34,26,32],[61,35,26,33,"userData"],[61,43,26,41],[61,44,26,42],[61,47,26,45],[61,51,26,49],[62,4,27,2],[62,5,27,3],[62,6,27,4],[62,13,27,11,"error"],[62,18,27,16],[62,20,27,18],[63,6,28,4,"console"],[63,13,28,11],[63,14,28,12,"error"],[63,19,28,17],[63,20,28,18],[63,52,28,50],[63,54,28,52,"error"],[63,59,28,57],[63,60,28,58],[64,6,29,4],[64,13,29,11],[64,17,29,15],[65,4,30,2],[66,2,31,0],[66,3,31,1],[68,2,33,0],[69,2,34,7],[69,8,34,13,"saveUserToFirebase"],[69,26,34,31],[69,29,34,34],[69,35,34,41,"user"],[69,39,34,51],[69,43,34,71],[70,4,35,2],[70,8,35,6],[71,6,36,4],[71,12,36,10,"userRef"],[71,19,36,17],[71,22,36,20],[71,26,36,20,"ref"],[71,43,36,23],[71,44,36,23,"ref"],[71,47,36,23],[71,49,36,24,"database"],[71,64,36,32],[71,65,36,32,"database"],[71,73,36,32],[71,75,36,34],[71,84,36,43,"user"],[71,88,36,47],[71,89,36,48,"phone"],[71,94,36,53],[71,96,36,55],[71,97,36,56],[72,6,37,4],[72,12,37,10],[72,16,37,10,"set"],[72,33,37,13],[72,34,37,13,"set"],[72,37,37,13],[72,39,37,14,"userRef"],[72,46,37,21],[72,48,37,23],[73,8,38,6,"name"],[73,12,38,10],[73,14,38,12,"user"],[73,18,38,16],[73,19,38,17,"name"],[73,23,38,21],[74,8,39,6,"online"],[74,14,39,12],[74,16,39,14],[75,6,40,4],[75,7,40,5],[75,8,40,6],[77,6,42,4],[78,6,43,4],[78,12,43,10,"onlineRef"],[78,21,43,19],[78,24,43,22],[78,28,43,22,"ref"],[78,45,43,25],[78,46,43,25,"ref"],[78,49,43,25],[78,51,43,26,"database"],[78,66,43,34],[78,67,43,34,"database"],[78,75,43,34],[78,77,43,36],[78,86,43,45,"user"],[78,90,43,49],[78,91,43,50,"phone"],[78,96,43,55],[78,105,43,64],[78,106,43,65],[79,6,44,4],[79,12,44,10],[79,16,44,10,"onDisconnect"],[79,33,44,22],[79,34,44,22,"onDisconnect"],[79,46,44,22],[79,48,44,23,"onlineRef"],[79,57,44,32],[79,58,44,33],[79,59,44,34,"set"],[79,62,44,37],[79,63,44,38],[79,68,44,43],[79,69,44,44],[80,6,46,4,"console"],[80,13,46,11],[80,14,46,12,"log"],[80,17,46,15],[80,18,46,16],[80,55,46,53],[80,56,46,54],[81,4,47,2],[81,5,47,3],[81,6,47,4],[81,13,47,11,"error"],[81,18,47,16],[81,20,47,18],[82,6,48,4,"console"],[82,13,48,11],[82,14,48,12,"error"],[82,19,48,17],[82,20,48,18],[82,52,48,50],[82,54,48,52,"error"],[82,59,48,57],[82,60,48,58],[83,6,49,4],[83,12,49,10,"error"],[83,17,49,15],[84,4,50,2],[85,2,51,0],[85,3,51,1],[87,2,53,0],[88,2,54,7],[88,8,54,13,"setUserOnlineStatus"],[88,27,54,32],[88,30,54,35],[88,36,54,35,"setUserOnlineStatus"],[88,37,54,42,"phone"],[88,42,54,55],[88,44,54,57,"online"],[88,50,54,72],[88,55,54,92],[89,4,55,2],[89,8,55,6],[90,6,56,4],[90,12,56,10,"onlineRef"],[90,21,56,19],[90,24,56,22],[90,28,56,22,"ref"],[90,45,56,25],[90,46,56,25,"ref"],[90,49,56,25],[90,51,56,26,"database"],[90,66,56,34],[90,67,56,34,"database"],[90,75,56,34],[90,77,56,36],[90,86,56,45,"phone"],[90,91,56,50],[90,100,56,59],[90,101,56,60],[91,6,57,4],[91,12,57,10],[91,16,57,10,"set"],[91,33,57,13],[91,34,57,13,"set"],[91,37,57,13],[91,39,57,14,"onlineRef"],[91,48,57,23],[91,50,57,25,"online"],[91,56,57,31],[91,57,57,32],[92,6,58,4,"console"],[92,13,58,11],[92,14,58,12,"log"],[92,17,58,15],[92,18,58,16],[92,26,58,24,"phone"],[92,31,58,29],[92,56,58,54,"online"],[92,62,58,60],[92,64,58,62],[92,65,58,63],[93,4,59,2],[93,5,59,3],[93,6,59,4],[93,13,59,11,"error"],[93,18,59,16],[93,20,59,18],[94,6,60,4,"console"],[94,13,60,11],[94,14,60,12,"error"],[94,19,60,17],[94,20,60,18],[94,51,60,49],[94,53,60,51,"error"],[94,58,60,56],[94,59,60,57],[95,6,61,4],[95,12,61,10,"error"],[95,17,61,15],[96,4,62,2],[97,2,63,0],[97,3,63,1],[99,2,65,0],[100,2,66,7],[100,8,66,13,"clearLocalUser"],[100,22,66,27],[100,25,66,30],[100,31,66,30,"clearLocalUser"],[100,32,66,30],[100,37,66,57],[101,4,67,2],[101,8,67,6],[102,6,68,4],[102,12,68,10,"AsyncStorage"],[102,24,68,22],[102,25,68,22,"default"],[102,32,68,22],[102,33,68,23,"removeItem"],[102,43,68,33],[102,44,68,34,"USER_STORAGE_KEY"],[102,60,68,50],[102,61,68,51],[103,4,69,2],[103,5,69,3],[103,6,69,4],[103,13,69,11,"error"],[103,18,69,16],[103,20,69,18],[104,6,70,4,"console"],[104,13,70,11],[104,14,70,12,"error"],[104,19,70,17],[104,20,70,18],[104,48,70,46],[104,50,70,48,"error"],[104,55,70,53],[104,56,70,54],[105,6,71,4],[105,12,71,10,"error"],[105,17,71,15],[106,4,72,2],[107,2,73,0],[107,3,73,1],[108,0,73,2],[108,3]],"functionMap":{"names":["<global>","saveUserLocally","getUserFromLocal","saveUserToFirebase","setUserOnlineStatus","clearLocalUser"],"mappings":"AAA;+BCY;CDO;gCEG;CFQ;kCGG;CHiB;mCIG;CJS;8BKG;CLO"},"hasCjsExports":false},"type":"js/module"}]}