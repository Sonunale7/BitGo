{"dependencies":[{"name":"firebase/database","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":59,"index":59}}],"key":"ZF/J3nfk5GUgbzXl84BqV1IxYEE=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":60},"end":{"line":2,"column":46,"index":106}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":69,"index":176}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"saveUserLocally\", {\n    enumerable: true,\n    get: function () {\n      return saveUserLocally;\n    }\n  });\n  Object.defineProperty(exports, \"getUserFromLocal\", {\n    enumerable: true,\n    get: function () {\n      return getUserFromLocal;\n    }\n  });\n  Object.defineProperty(exports, \"saveUserToFirebase\", {\n    enumerable: true,\n    get: function () {\n      return saveUserToFirebase;\n    }\n  });\n  Object.defineProperty(exports, \"setUserOnlineStatus\", {\n    enumerable: true,\n    get: function () {\n      return setUserOnlineStatus;\n    }\n  });\n  Object.defineProperty(exports, \"clearLocalUser\", {\n    enumerable: true,\n    get: function () {\n      return clearLocalUser;\n    }\n  });\n  var _firebaseDatabase = require(_dependencyMap[0], \"firebase/database\");\n  var _configFirebase = require(_dependencyMap[1], \"../config/firebase\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const USER_STORAGE_KEY = '@bitgo_user';\n  // Save user to local storage\n  const saveUserLocally = async user => {\n    try {\n      await AsyncStorage.default.setItem(USER_STORAGE_KEY, JSON.stringify(user));\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  // Get user from local storage\n  const getUserFromLocal = async () => {\n    try {\n      const userData = await AsyncStorage.default.getItem(USER_STORAGE_KEY);\n      return userData ? JSON.parse(userData) : null;\n    } catch (error) {\n      return null;\n    }\n  };\n\n  // Save user to Firebase Realtime Database\n  const saveUserToFirebase = async user => {\n    try {\n      const userRef = (0, _firebaseDatabase.ref)(_configFirebase.database, `users/${user.phone}`);\n      await (0, _firebaseDatabase.set)(userRef, {\n        name: user.name,\n        online: true\n      });\n\n      // Set up onDisconnect to mark user as offline when connection is lost\n      const onlineRef = (0, _firebaseDatabase.ref)(_configFirebase.database, `users/${user.phone}/online`);\n      await (0, _firebaseDatabase.onDisconnect)(onlineRef).set(false);\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  // Update user online status\n  const setUserOnlineStatus = async (phone, online) => {\n    try {\n      const onlineRef = (0, _firebaseDatabase.ref)(_configFirebase.database, `users/${phone}/online`);\n      await (0, _firebaseDatabase.set)(onlineRef, online);\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  // Clear local user data (for logout)\n  const clearLocalUser = async () => {\n    try {\n      await AsyncStorage.default.removeItem(USER_STORAGE_KEY);\n    } catch (error) {\n      throw error;\n    }\n  };\n});","lineCount":101,"map":[[12,2,13,0,"Object"],[12,8,13,0],[12,9,13,0,"defineProperty"],[12,23,13,0],[12,24,13,0,"exports"],[12,31,13,0],[13,4,13,0,"enumerable"],[13,14,13,0],[14,4,13,0,"get"],[14,7,13,0],[14,18,13,0,"get"],[14,19,13,0],[15,6,13,0],[15,13,13,0,"saveUserLocally"],[15,28,13,0],[16,4,13,0],[17,2,13,0],[18,2,22,0,"Object"],[18,8,22,0],[18,9,22,0,"defineProperty"],[18,23,22,0],[18,24,22,0,"exports"],[18,31,22,0],[19,4,22,0,"enumerable"],[19,14,22,0],[20,4,22,0,"get"],[20,7,22,0],[20,18,22,0,"get"],[20,19,22,0],[21,6,22,0],[21,13,22,0,"getUserFromLocal"],[21,29,22,0],[22,4,22,0],[23,2,22,0],[24,2,32,0,"Object"],[24,8,32,0],[24,9,32,0,"defineProperty"],[24,23,32,0],[24,24,32,0,"exports"],[24,31,32,0],[25,4,32,0,"enumerable"],[25,14,32,0],[26,4,32,0,"get"],[26,7,32,0],[26,18,32,0,"get"],[26,19,32,0],[27,6,32,0],[27,13,32,0,"saveUserToFirebase"],[27,31,32,0],[28,4,32,0],[29,2,32,0],[30,2,49,0,"Object"],[30,8,49,0],[30,9,49,0,"defineProperty"],[30,23,49,0],[30,24,49,0,"exports"],[30,31,49,0],[31,4,49,0,"enumerable"],[31,14,49,0],[32,4,49,0,"get"],[32,7,49,0],[32,18,49,0,"get"],[32,19,49,0],[33,6,49,0],[33,13,49,0,"setUserOnlineStatus"],[33,32,49,0],[34,4,49,0],[35,2,49,0],[36,2,59,0,"Object"],[36,8,59,0],[36,9,59,0,"defineProperty"],[36,23,59,0],[36,24,59,0,"exports"],[36,31,59,0],[37,4,59,0,"enumerable"],[37,14,59,0],[38,4,59,0,"get"],[38,7,59,0],[38,18,59,0,"get"],[38,19,59,0],[39,6,59,0],[39,13,59,0,"clearLocalUser"],[39,27,59,0],[40,4,59,0],[41,2,59,0],[42,2,1,0],[42,6,1,0,"_firebaseDatabase"],[42,23,1,0],[42,26,1,0,"require"],[42,33,1,0],[42,34,1,0,"_dependencyMap"],[42,48,1,0],[43,2,2,0],[43,6,2,0,"_configFirebase"],[43,21,2,0],[43,24,2,0,"require"],[43,31,2,0],[43,32,2,0,"_dependencyMap"],[43,46,2,0],[44,2,3,0],[44,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[44,42,3,0],[44,45,3,0,"require"],[44,52,3,0],[44,53,3,0,"_dependencyMap"],[44,67,3,0],[45,2,3,0],[45,6,3,0,"AsyncStorage"],[45,18,3,0],[45,21,3,0,"_interopDefault"],[45,36,3,0],[45,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[45,73,3,0],[46,2,5,0],[46,8,5,6,"USER_STORAGE_KEY"],[46,24,5,22],[46,27,5,25],[46,40,5,38],[47,2,12,0],[48,2,13,7],[48,8,13,13,"saveUserLocally"],[48,23,13,28],[48,26,13,31],[48,32,13,38,"user"],[48,36,13,48],[48,40,13,68],[49,4,14,2],[49,8,14,6],[50,6,15,4],[50,12,15,10,"AsyncStorage"],[50,24,15,22],[50,25,15,22,"default"],[50,32,15,22],[50,33,15,23,"setItem"],[50,40,15,30],[50,41,15,31,"USER_STORAGE_KEY"],[50,57,15,47],[50,59,15,49,"JSON"],[50,63,15,53],[50,64,15,54,"stringify"],[50,73,15,63],[50,74,15,64,"user"],[50,78,15,68],[50,79,15,69],[50,80,15,70],[51,4,16,2],[51,5,16,3],[51,6,16,4],[51,13,16,11,"error"],[51,18,16,16],[51,20,16,18],[52,6,17,4],[52,12,17,10,"error"],[52,17,17,15],[53,4,18,2],[54,2,19,0],[54,3,19,1],[56,2,21,0],[57,2,22,7],[57,8,22,13,"getUserFromLocal"],[57,24,22,29],[57,27,22,32],[57,33,22,32,"getUserFromLocal"],[57,34,22,32],[57,39,22,66],[58,4,23,2],[58,8,23,6],[59,6,24,4],[59,12,24,10,"userData"],[59,20,24,18],[59,23,24,21],[59,29,24,27,"AsyncStorage"],[59,41,24,39],[59,42,24,39,"default"],[59,49,24,39],[59,50,24,40,"getItem"],[59,57,24,47],[59,58,24,48,"USER_STORAGE_KEY"],[59,74,24,64],[59,75,24,65],[60,6,25,4],[60,13,25,11,"userData"],[60,21,25,19],[60,24,25,22,"JSON"],[60,28,25,26],[60,29,25,27,"parse"],[60,34,25,32],[60,35,25,33,"userData"],[60,43,25,41],[60,44,25,42],[60,47,25,45],[60,51,25,49],[61,4,26,2],[61,5,26,3],[61,6,26,4],[61,13,26,11,"error"],[61,18,26,16],[61,20,26,18],[62,6,27,4],[62,13,27,11],[62,17,27,15],[63,4,28,2],[64,2,29,0],[64,3,29,1],[66,2,31,0],[67,2,32,7],[67,8,32,13,"saveUserToFirebase"],[67,26,32,31],[67,29,32,34],[67,35,32,41,"user"],[67,39,32,51],[67,43,32,71],[68,4,33,2],[68,8,33,6],[69,6,34,4],[69,12,34,10,"userRef"],[69,19,34,17],[69,22,34,20],[69,26,34,20,"ref"],[69,43,34,23],[69,44,34,23,"ref"],[69,47,34,23],[69,49,34,24,"database"],[69,64,34,32],[69,65,34,32,"database"],[69,73,34,32],[69,75,34,34],[69,84,34,43,"user"],[69,88,34,47],[69,89,34,48,"phone"],[69,94,34,53],[69,96,34,55],[69,97,34,56],[70,6,35,4],[70,12,35,10],[70,16,35,10,"set"],[70,33,35,13],[70,34,35,13,"set"],[70,37,35,13],[70,39,35,14,"userRef"],[70,46,35,21],[70,48,35,23],[71,8,36,6,"name"],[71,12,36,10],[71,14,36,12,"user"],[71,18,36,16],[71,19,36,17,"name"],[71,23,36,21],[72,8,37,6,"online"],[72,14,37,12],[72,16,37,14],[73,6,38,4],[73,7,38,5],[73,8,38,6],[75,6,40,4],[76,6,41,4],[76,12,41,10,"onlineRef"],[76,21,41,19],[76,24,41,22],[76,28,41,22,"ref"],[76,45,41,25],[76,46,41,25,"ref"],[76,49,41,25],[76,51,41,26,"database"],[76,66,41,34],[76,67,41,34,"database"],[76,75,41,34],[76,77,41,36],[76,86,41,45,"user"],[76,90,41,49],[76,91,41,50,"phone"],[76,96,41,55],[76,105,41,64],[76,106,41,65],[77,6,42,4],[77,12,42,10],[77,16,42,10,"onDisconnect"],[77,33,42,22],[77,34,42,22,"onDisconnect"],[77,46,42,22],[77,48,42,23,"onlineRef"],[77,57,42,32],[77,58,42,33],[77,59,42,34,"set"],[77,62,42,37],[77,63,42,38],[77,68,42,43],[77,69,42,44],[78,4,43,2],[78,5,43,3],[78,6,43,4],[78,13,43,11,"error"],[78,18,43,16],[78,20,43,18],[79,6,44,4],[79,12,44,10,"error"],[79,17,44,15],[80,4,45,2],[81,2,46,0],[81,3,46,1],[83,2,48,0],[84,2,49,7],[84,8,49,13,"setUserOnlineStatus"],[84,27,49,32],[84,30,49,35],[84,36,49,35,"setUserOnlineStatus"],[84,37,49,42,"phone"],[84,42,49,55],[84,44,49,57,"online"],[84,50,49,72],[84,55,49,92],[85,4,50,2],[85,8,50,6],[86,6,51,4],[86,12,51,10,"onlineRef"],[86,21,51,19],[86,24,51,22],[86,28,51,22,"ref"],[86,45,51,25],[86,46,51,25,"ref"],[86,49,51,25],[86,51,51,26,"database"],[86,66,51,34],[86,67,51,34,"database"],[86,75,51,34],[86,77,51,36],[86,86,51,45,"phone"],[86,91,51,50],[86,100,51,59],[86,101,51,60],[87,6,52,4],[87,12,52,10],[87,16,52,10,"set"],[87,33,52,13],[87,34,52,13,"set"],[87,37,52,13],[87,39,52,14,"onlineRef"],[87,48,52,23],[87,50,52,25,"online"],[87,56,52,31],[87,57,52,32],[88,4,53,2],[88,5,53,3],[88,6,53,4],[88,13,53,11,"error"],[88,18,53,16],[88,20,53,18],[89,6,54,4],[89,12,54,10,"error"],[89,17,54,15],[90,4,55,2],[91,2,56,0],[91,3,56,1],[93,2,58,0],[94,2,59,7],[94,8,59,13,"clearLocalUser"],[94,22,59,27],[94,25,59,30],[94,31,59,30,"clearLocalUser"],[94,32,59,30],[94,37,59,57],[95,4,60,2],[95,8,60,6],[96,6,61,4],[96,12,61,10,"AsyncStorage"],[96,24,61,22],[96,25,61,22,"default"],[96,32,61,22],[96,33,61,23,"removeItem"],[96,43,61,33],[96,44,61,34,"USER_STORAGE_KEY"],[96,60,61,50],[96,61,61,51],[97,4,62,2],[97,5,62,3],[97,6,62,4],[97,13,62,11,"error"],[97,18,62,16],[97,20,62,18],[98,6,63,4],[98,12,63,10,"error"],[98,17,63,15],[99,4,64,2],[100,2,65,0],[100,3,65,1],[101,0,65,2],[101,3]],"functionMap":{"names":["<global>","saveUserLocally","getUserFromLocal","saveUserToFirebase","setUserOnlineStatus","clearLocalUser"],"mappings":"AAA;+BCY;CDM;gCEG;CFO;kCGG;CHc;mCIG;CJO;8BKG;CLM"},"hasCjsExports":false},"type":"js/module"}]}