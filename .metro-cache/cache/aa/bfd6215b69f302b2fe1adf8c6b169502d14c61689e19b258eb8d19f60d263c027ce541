{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/messageService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":13,"column":36,"index":309}}],"key":"BgocpR5elj5+H74kAotl+BD0mA8=","exportNames":["*"],"imports":1}},{"name":"../services/networkService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":310},"end":{"line":14,"column":70,"index":380}}],"key":"9oYCR1OK4qlJRMTdqxwx0Wbqa1Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useChat\", {\n    enumerable: true,\n    get: function () {\n      return useChat;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesMessageService = require(_dependencyMap[1], \"../services/messageService\");\n  var _servicesNetworkService = require(_dependencyMap[2], \"../services/networkService\");\n  const useChat = (currentUserPhone, otherUserPhone) => {\n    const [messages, setMessages] = (0, _react.useState)([]);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const chatId = (0, _servicesMessageService.getChatId)(currentUserPhone, otherUserPhone);\n    const unsubscribeRef = (0, _react.useRef)(null);\n    const knownMessageIdsRef = (0, _react.useRef)(new Set());\n    const isMountedRef = (0, _react.useRef)(true);\n    const isSubscribedRef = (0, _react.useRef)(false);\n\n    // Handle status updates from queue processor - update only the specific message\n    const handleStatusUpdate = (0, _react.useCallback)((messageId, msgChatId, status) => {\n      if (!isMountedRef.current) return;\n      if (msgChatId === chatId) {\n        setMessages(prev => {\n          const idx = prev.findIndex(m => m.id === messageId);\n          if (idx === -1 || prev[idx].status === status) return prev;\n          const updated = [...prev];\n          updated[idx] = {\n            ...updated[idx],\n            status\n          };\n          return updated;\n        });\n      }\n    }, [chatId]);\n    const {\n      isOnline,\n      queueLength\n    } = (0, _servicesNetworkService.useMessageQueueProcessor)(handleStatusUpdate);\n\n    // Load local messages on mount - no refetch on updates\n    (0, _react.useEffect)(() => {\n      isMountedRef.current = true;\n      isSubscribedRef.current = false;\n      const loadMessages = async () => {\n        if (!isMountedRef.current) return;\n        setIsLoading(true);\n        const localMessages = await (0, _servicesMessageService.getLocalMessages)(chatId);\n        if (!isMountedRef.current) return;\n        setMessages(localMessages);\n\n        // Build known message IDs set to prevent duplicates\n        knownMessageIdsRef.current = new Set(localMessages.map(m => m.id));\n        setIsLoading(false);\n\n        // Prevent duplicate listener subscription\n        if (isSubscribedRef.current) return;\n        isSubscribedRef.current = true;\n\n        // Subscribe to new messages from Firebase with limitToLast(30)\n        const lastTimestamp = localMessages.length > 0 ? Math.max(...localMessages.map(m => m.timestamp)) : 0;\n        unsubscribeRef.current = (0, _servicesMessageService.subscribeToNewMessages)(chatId, lastTimestamp, async newMessage => {\n          if (!isMountedRef.current) return;\n\n          // Skip if already known (duplicate prevention)\n          if (knownMessageIdsRef.current.has(newMessage.id)) {\n            return;\n          }\n\n          // Only add if not from current user (avoid duplicates)\n          if (newMessage.sender !== currentUserPhone) {\n            knownMessageIdsRef.current.add(newMessage.id);\n            await (0, _servicesMessageService.addMessageLocally)(chatId, newMessage);\n            if (!isMountedRef.current) return;\n\n            // Update state without refetching entire chat\n            setMessages(prev => {\n              if (prev.find(m => m.id === newMessage.id)) return prev;\n              return [...prev, newMessage].sort((a, b) => a.timestamp - b.timestamp);\n            });\n          }\n        }, knownMessageIdsRef.current);\n      };\n      if (currentUserPhone && otherUserPhone) {\n        loadMessages();\n      }\n\n      // Cleanup on unmount\n      return () => {\n        isMountedRef.current = false;\n        isSubscribedRef.current = false;\n        if (unsubscribeRef.current) {\n          unsubscribeRef.current();\n          unsubscribeRef.current = null;\n        }\n      };\n    }, [chatId, currentUserPhone, otherUserPhone]);\n\n    // Send message - local first approach, uses same messageId on retry\n    const sendMessage = (0, _react.useCallback)(async text => {\n      if (!text.trim() || !isMountedRef.current) return;\n      const messageId = (0, _servicesMessageService.generateMessageId)();\n      const message = {\n        id: messageId,\n        text: text.trim(),\n        sender: currentUserPhone,\n        timestamp: Date.now(),\n        status: 'sending'\n      };\n\n      // Track this message ID to prevent duplicates\n      knownMessageIdsRef.current.add(messageId);\n\n      // 1. Add to local state immediately (instant feedback)\n      setMessages(prev => [...prev, message]);\n\n      // 2. Save to local storage\n      await (0, _servicesMessageService.addMessageLocally)(chatId, message);\n\n      // 3. Try to send to Firebase (same messageId used for retry)\n      const success = await (0, _servicesMessageService.sendMessageToFirebase)(chatId, message);\n      if (!isMountedRef.current) return;\n      if (success) {\n        // Update only status, not refetch\n        await (0, _servicesMessageService.updateMessageStatusLocally)(chatId, message.id, 'sent');\n        setMessages(prev => {\n          const idx = prev.findIndex(m => m.id === message.id);\n          if (idx === -1) return prev;\n          const updated = [...prev];\n          updated[idx] = {\n            ...updated[idx],\n            status: 'sent'\n          };\n          return updated;\n        });\n      } else {\n        // Add to queue for retry - uses same messageId\n        await (0, _servicesMessageService.addToQueue)(chatId, message);\n        await (0, _servicesMessageService.updateMessageStatusLocally)(chatId, message.id, 'queued');\n        setMessages(prev => {\n          const idx = prev.findIndex(m => m.id === message.id);\n          if (idx === -1) return prev;\n          const updated = [...prev];\n          updated[idx] = {\n            ...updated[idx],\n            status: 'queued'\n          };\n          return updated;\n        });\n      }\n    }, [chatId, currentUserPhone]);\n    return {\n      messages,\n      sendMessage,\n      isLoading,\n      isOnline,\n      queueLength,\n      chatId\n    };\n  };\n});","lineCount":166,"map":[[7,2,16,0,"Object"],[7,8,16,0],[7,9,16,0,"defineProperty"],[7,23,16,0],[7,24,16,0,"exports"],[7,31,16,0],[8,4,16,0,"enumerable"],[8,14,16,0],[9,4,16,0,"get"],[9,7,16,0],[9,18,16,0,"get"],[9,19,16,0],[10,6,16,0],[10,13,16,0,"useChat"],[10,20,16,0],[11,4,16,0],[12,2,16,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_servicesMessageService"],[14,29,2,0],[14,32,2,0,"require"],[14,39,2,0],[14,40,2,0,"_dependencyMap"],[14,54,2,0],[15,2,14,0],[15,6,14,0,"_servicesNetworkService"],[15,29,14,0],[15,32,14,0,"require"],[15,39,14,0],[15,40,14,0,"_dependencyMap"],[15,54,14,0],[16,2,16,7],[16,8,16,13,"useChat"],[16,15,16,20],[16,18,16,23,"useChat"],[16,19,16,24,"currentUserPhone"],[16,35,16,48],[16,37,16,50,"otherUserPhone"],[16,51,16,72],[16,56,16,77],[17,4,17,2],[17,10,17,8],[17,11,17,9,"messages"],[17,19,17,17],[17,21,17,19,"setMessages"],[17,32,17,30],[17,33,17,31],[17,36,17,34],[17,40,17,34,"useState"],[17,46,17,42],[17,47,17,42,"useState"],[17,55,17,42],[17,57,17,54],[17,59,17,56],[17,60,17,57],[18,4,18,2],[18,10,18,8],[18,11,18,9,"isLoading"],[18,20,18,18],[18,22,18,20,"setIsLoading"],[18,34,18,32],[18,35,18,33],[18,38,18,36],[18,42,18,36,"useState"],[18,48,18,44],[18,49,18,44,"useState"],[18,57,18,44],[18,59,18,45],[18,63,18,49],[18,64,18,50],[19,4,19,2],[19,10,19,8,"chatId"],[19,16,19,14],[19,19,19,17],[19,23,19,17,"getChatId"],[19,46,19,26],[19,47,19,26,"getChatId"],[19,56,19,26],[19,58,19,27,"currentUserPhone"],[19,74,19,43],[19,76,19,45,"otherUserPhone"],[19,90,19,59],[19,91,19,60],[20,4,20,2],[20,10,20,8,"unsubscribeRef"],[20,24,20,22],[20,27,20,25],[20,31,20,25,"useRef"],[20,37,20,31],[20,38,20,31,"useRef"],[20,44,20,31],[20,46,20,53],[20,50,20,57],[20,51,20,58],[21,4,21,2],[21,10,21,8,"knownMessageIdsRef"],[21,28,21,26],[21,31,21,29],[21,35,21,29,"useRef"],[21,41,21,35],[21,42,21,35,"useRef"],[21,48,21,35],[21,50,21,49],[21,54,21,53,"Set"],[21,57,21,56],[21,58,21,57],[21,59,21,58],[21,60,21,59],[22,4,22,2],[22,10,22,8,"isMountedRef"],[22,22,22,20],[22,25,22,23],[22,29,22,23,"useRef"],[22,35,22,29],[22,36,22,29,"useRef"],[22,42,22,29],[22,44,22,30],[22,48,22,34],[22,49,22,35],[23,4,23,2],[23,10,23,8,"isSubscribedRef"],[23,25,23,23],[23,28,23,26],[23,32,23,26,"useRef"],[23,38,23,32],[23,39,23,32,"useRef"],[23,45,23,32],[23,47,23,33],[23,52,23,38],[23,53,23,39],[25,4,25,2],[26,4,26,2],[26,10,26,8,"handleStatusUpdate"],[26,28,26,26],[26,31,26,29],[26,35,26,29,"useCallback"],[26,41,26,40],[26,42,26,40,"useCallback"],[26,53,26,40],[26,55,26,41],[26,56,26,42,"messageId"],[26,65,26,59],[26,67,26,61,"msgChatId"],[26,76,26,78],[26,78,26,80,"status"],[26,84,26,105],[26,89,26,110],[27,6,27,4],[27,10,27,8],[27,11,27,9,"isMountedRef"],[27,23,27,21],[27,24,27,22,"current"],[27,31,27,29],[27,33,27,31],[28,6,28,4],[28,10,28,8,"msgChatId"],[28,19,28,17],[28,24,28,22,"chatId"],[28,30,28,28],[28,32,28,30],[29,8,29,6,"setMessages"],[29,19,29,17],[29,20,29,18,"prev"],[29,24,29,22],[29,28,29,26],[30,10,30,8],[30,16,30,14,"idx"],[30,19,30,17],[30,22,30,20,"prev"],[30,26,30,24],[30,27,30,25,"findIndex"],[30,36,30,34],[30,37,30,35,"m"],[30,38,30,36],[30,42,30,40,"m"],[30,43,30,41],[30,44,30,42,"id"],[30,46,30,44],[30,51,30,49,"messageId"],[30,60,30,58],[30,61,30,59],[31,10,31,8],[31,14,31,12,"idx"],[31,17,31,15],[31,22,31,20],[31,23,31,21],[31,24,31,22],[31,28,31,26,"prev"],[31,32,31,30],[31,33,31,31,"idx"],[31,36,31,34],[31,37,31,35],[31,38,31,36,"status"],[31,44,31,42],[31,49,31,47,"status"],[31,55,31,53],[31,57,31,55],[31,64,31,62,"prev"],[31,68,31,66],[32,10,32,8],[32,16,32,14,"updated"],[32,23,32,21],[32,26,32,24],[32,27,32,25],[32,30,32,28,"prev"],[32,34,32,32],[32,35,32,33],[33,10,33,8,"updated"],[33,17,33,15],[33,18,33,16,"idx"],[33,21,33,19],[33,22,33,20],[33,25,33,23],[34,12,33,25],[34,15,33,28,"updated"],[34,22,33,35],[34,23,33,36,"idx"],[34,26,33,39],[34,27,33,40],[35,12,33,42,"status"],[36,10,33,49],[36,11,33,50],[37,10,34,8],[37,17,34,15,"updated"],[37,24,34,22],[38,8,35,6],[38,9,35,7],[38,10,35,8],[39,6,36,4],[40,4,37,2],[40,5,37,3],[40,7,37,5],[40,8,37,6,"chatId"],[40,14,37,12],[40,15,37,13],[40,16,37,14],[41,4,39,2],[41,10,39,8],[42,6,39,10,"isOnline"],[42,14,39,18],[43,6,39,20,"queueLength"],[44,4,39,32],[44,5,39,33],[44,8,39,36],[44,12,39,36,"useMessageQueueProcessor"],[44,35,39,60],[44,36,39,60,"useMessageQueueProcessor"],[44,60,39,60],[44,62,39,61,"handleStatusUpdate"],[44,80,39,79],[44,81,39,80],[46,4,41,2],[47,4,42,2],[47,8,42,2,"useEffect"],[47,14,42,11],[47,15,42,11,"useEffect"],[47,24,42,11],[47,26,42,12],[47,32,42,18],[48,6,43,4,"isMountedRef"],[48,18,43,16],[48,19,43,17,"current"],[48,26,43,24],[48,29,43,27],[48,33,43,31],[49,6,44,4,"isSubscribedRef"],[49,21,44,19],[49,22,44,20,"current"],[49,29,44,27],[49,32,44,30],[49,37,44,35],[50,6,46,4],[50,12,46,10,"loadMessages"],[50,24,46,22],[50,27,46,25],[50,33,46,25,"loadMessages"],[50,34,46,25],[50,39,46,37],[51,8,47,6],[51,12,47,10],[51,13,47,11,"isMountedRef"],[51,25,47,23],[51,26,47,24,"current"],[51,33,47,31],[51,35,47,33],[52,8,49,6,"setIsLoading"],[52,20,49,18],[52,21,49,19],[52,25,49,23],[52,26,49,24],[53,8,50,6],[53,14,50,12,"localMessages"],[53,27,50,25],[53,30,50,28],[53,36,50,34],[53,40,50,34,"getLocalMessages"],[53,63,50,50],[53,64,50,50,"getLocalMessages"],[53,80,50,50],[53,82,50,51,"chatId"],[53,88,50,57],[53,89,50,58],[54,8,52,6],[54,12,52,10],[54,13,52,11,"isMountedRef"],[54,25,52,23],[54,26,52,24,"current"],[54,33,52,31],[54,35,52,33],[55,8,54,6,"setMessages"],[55,19,54,17],[55,20,54,18,"localMessages"],[55,33,54,31],[55,34,54,32],[57,8,56,6],[58,8,57,6,"knownMessageIdsRef"],[58,26,57,24],[58,27,57,25,"current"],[58,34,57,32],[58,37,57,35],[58,41,57,39,"Set"],[58,44,57,42],[58,45,57,43,"localMessages"],[58,58,57,56],[58,59,57,57,"map"],[58,62,57,60],[58,63,57,61,"m"],[58,64,57,62],[58,68,57,66,"m"],[58,69,57,67],[58,70,57,68,"id"],[58,72,57,70],[58,73,57,71],[58,74,57,72],[59,8,59,6,"setIsLoading"],[59,20,59,18],[59,21,59,19],[59,26,59,24],[59,27,59,25],[61,8,61,6],[62,8,62,6],[62,12,62,10,"isSubscribedRef"],[62,27,62,25],[62,28,62,26,"current"],[62,35,62,33],[62,37,62,35],[63,8,63,6,"isSubscribedRef"],[63,23,63,21],[63,24,63,22,"current"],[63,31,63,29],[63,34,63,32],[63,38,63,36],[65,8,65,6],[66,8,66,6],[66,14,66,12,"lastTimestamp"],[66,27,66,25],[66,30,66,28,"localMessages"],[66,43,66,41],[66,44,66,42,"length"],[66,50,66,48],[66,53,66,51],[66,54,66,52],[66,57,67,10,"Math"],[66,61,67,14],[66,62,67,15,"max"],[66,65,67,18],[66,66,67,19],[66,69,67,22,"localMessages"],[66,82,67,35],[66,83,67,36,"map"],[66,86,67,39],[66,87,67,40,"m"],[66,88,67,41],[66,92,67,45,"m"],[66,93,67,46],[66,94,67,47,"timestamp"],[66,103,67,56],[66,104,67,57],[66,105,67,58],[66,108,68,10],[66,109,68,11],[67,8,70,6,"unsubscribeRef"],[67,22,70,20],[67,23,70,21,"current"],[67,30,70,28],[67,33,70,31],[67,37,70,31,"subscribeToNewMessages"],[67,60,70,53],[67,61,70,53,"subscribeToNewMessages"],[67,83,70,53],[67,85,71,8,"chatId"],[67,91,71,14],[67,93,72,8,"lastTimestamp"],[67,106,72,21],[67,108,73,8],[67,114,73,15,"newMessage"],[67,124,73,25],[67,128,73,30],[68,10,74,10],[68,14,74,14],[68,15,74,15,"isMountedRef"],[68,27,74,27],[68,28,74,28,"current"],[68,35,74,35],[68,37,74,37],[70,10,76,10],[71,10,77,10],[71,14,77,14,"knownMessageIdsRef"],[71,32,77,32],[71,33,77,33,"current"],[71,40,77,40],[71,41,77,41,"has"],[71,44,77,44],[71,45,77,45,"newMessage"],[71,55,77,55],[71,56,77,56,"id"],[71,58,77,58],[71,59,77,59],[71,61,77,61],[72,12,78,12],[73,10,79,10],[75,10,81,10],[76,10,82,10],[76,14,82,14,"newMessage"],[76,24,82,24],[76,25,82,25,"sender"],[76,31,82,31],[76,36,82,36,"currentUserPhone"],[76,52,82,52],[76,54,82,54],[77,12,83,12,"knownMessageIdsRef"],[77,30,83,30],[77,31,83,31,"current"],[77,38,83,38],[77,39,83,39,"add"],[77,42,83,42],[77,43,83,43,"newMessage"],[77,53,83,53],[77,54,83,54,"id"],[77,56,83,56],[77,57,83,57],[78,12,84,12],[78,18,84,18],[78,22,84,18,"addMessageLocally"],[78,45,84,35],[78,46,84,35,"addMessageLocally"],[78,63,84,35],[78,65,84,36,"chatId"],[78,71,84,42],[78,73,84,44,"newMessage"],[78,83,84,54],[78,84,84,55],[79,12,86,12],[79,16,86,16],[79,17,86,17,"isMountedRef"],[79,29,86,29],[79,30,86,30,"current"],[79,37,86,37],[79,39,86,39],[81,12,88,12],[82,12,89,12,"setMessages"],[82,23,89,23],[82,24,89,24,"prev"],[82,28,89,28],[82,32,89,32],[83,14,90,14],[83,18,90,18,"prev"],[83,22,90,22],[83,23,90,23,"find"],[83,27,90,27],[83,28,90,28,"m"],[83,29,90,29],[83,33,90,33,"m"],[83,34,90,34],[83,35,90,35,"id"],[83,37,90,37],[83,42,90,42,"newMessage"],[83,52,90,52],[83,53,90,53,"id"],[83,55,90,55],[83,56,90,56],[83,58,90,58],[83,65,90,65,"prev"],[83,69,90,69],[84,14,91,14],[84,21,91,21],[84,22,91,22],[84,25,91,25,"prev"],[84,29,91,29],[84,31,91,31,"newMessage"],[84,41,91,41],[84,42,91,42],[84,43,91,43,"sort"],[84,47,91,47],[84,48,91,48],[84,49,91,49,"a"],[84,50,91,50],[84,52,91,52,"b"],[84,53,91,53],[84,58,91,58,"a"],[84,59,91,59],[84,60,91,60,"timestamp"],[84,69,91,69],[84,72,91,72,"b"],[84,73,91,73],[84,74,91,74,"timestamp"],[84,83,91,83],[84,84,91,84],[85,12,92,12],[85,13,92,13],[85,14,92,14],[86,10,93,10],[87,8,94,8],[87,9,94,9],[87,11,95,8,"knownMessageIdsRef"],[87,29,95,26],[87,30,95,27,"current"],[87,37,96,6],[87,38,96,7],[88,6,97,4],[88,7,97,5],[89,6,99,4],[89,10,99,8,"currentUserPhone"],[89,26,99,24],[89,30,99,28,"otherUserPhone"],[89,44,99,42],[89,46,99,44],[90,8,100,6,"loadMessages"],[90,20,100,18],[90,21,100,19],[90,22,100,20],[91,6,101,4],[93,6,103,4],[94,6,104,4],[94,13,104,11],[94,19,104,17],[95,8,105,6,"isMountedRef"],[95,20,105,18],[95,21,105,19,"current"],[95,28,105,26],[95,31,105,29],[95,36,105,34],[96,8,106,6,"isSubscribedRef"],[96,23,106,21],[96,24,106,22,"current"],[96,31,106,29],[96,34,106,32],[96,39,106,37],[97,8,107,6],[97,12,107,10,"unsubscribeRef"],[97,26,107,24],[97,27,107,25,"current"],[97,34,107,32],[97,36,107,34],[98,10,108,8,"unsubscribeRef"],[98,24,108,22],[98,25,108,23,"current"],[98,32,108,30],[98,33,108,31],[98,34,108,32],[99,10,109,8,"unsubscribeRef"],[99,24,109,22],[99,25,109,23,"current"],[99,32,109,30],[99,35,109,33],[99,39,109,37],[100,8,110,6],[101,6,111,4],[101,7,111,5],[102,4,112,2],[102,5,112,3],[102,7,112,5],[102,8,112,6,"chatId"],[102,14,112,12],[102,16,112,14,"currentUserPhone"],[102,32,112,30],[102,34,112,32,"otherUserPhone"],[102,48,112,46],[102,49,112,47],[102,50,112,48],[104,4,114,2],[105,4,115,2],[105,10,115,8,"sendMessage"],[105,21,115,19],[105,24,115,22],[105,28,115,22,"useCallback"],[105,34,115,33],[105,35,115,33,"useCallback"],[105,46,115,33],[105,48,115,34],[105,54,115,41,"text"],[105,58,115,53],[105,62,115,73],[106,6,116,4],[106,10,116,8],[106,11,116,9,"text"],[106,15,116,13],[106,16,116,14,"trim"],[106,20,116,18],[106,21,116,19],[106,22,116,20],[106,26,116,24],[106,27,116,25,"isMountedRef"],[106,39,116,37],[106,40,116,38,"current"],[106,47,116,45],[106,49,116,47],[107,6,118,4],[107,12,118,10,"messageId"],[107,21,118,19],[107,24,118,22],[107,28,118,22,"generateMessageId"],[107,51,118,39],[107,52,118,39,"generateMessageId"],[107,69,118,39],[107,71,118,40],[107,72,118,41],[108,6,119,4],[108,12,119,10,"message"],[108,19,119,26],[108,22,119,29],[109,8,120,6,"id"],[109,10,120,8],[109,12,120,10,"messageId"],[109,21,120,19],[110,8,121,6,"text"],[110,12,121,10],[110,14,121,12,"text"],[110,18,121,16],[110,19,121,17,"trim"],[110,23,121,21],[110,24,121,22],[110,25,121,23],[111,8,122,6,"sender"],[111,14,122,12],[111,16,122,14,"currentUserPhone"],[111,32,122,30],[112,8,123,6,"timestamp"],[112,17,123,15],[112,19,123,17,"Date"],[112,23,123,21],[112,24,123,22,"now"],[112,27,123,25],[112,28,123,26],[112,29,123,27],[113,8,124,6,"status"],[113,14,124,12],[113,16,124,14],[114,6,125,4],[114,7,125,5],[116,6,127,4],[117,6,128,4,"knownMessageIdsRef"],[117,24,128,22],[117,25,128,23,"current"],[117,32,128,30],[117,33,128,31,"add"],[117,36,128,34],[117,37,128,35,"messageId"],[117,46,128,44],[117,47,128,45],[119,6,130,4],[120,6,131,4,"setMessages"],[120,17,131,15],[120,18,131,16,"prev"],[120,22,131,20],[120,26,131,24],[120,27,131,25],[120,30,131,28,"prev"],[120,34,131,32],[120,36,131,34,"message"],[120,43,131,41],[120,44,131,42],[120,45,131,43],[122,6,133,4],[123,6,134,4],[123,12,134,10],[123,16,134,10,"addMessageLocally"],[123,39,134,27],[123,40,134,27,"addMessageLocally"],[123,57,134,27],[123,59,134,28,"chatId"],[123,65,134,34],[123,67,134,36,"message"],[123,74,134,43],[123,75,134,44],[125,6,136,4],[126,6,137,4],[126,12,137,10,"success"],[126,19,137,17],[126,22,137,20],[126,28,137,26],[126,32,137,26,"sendMessageToFirebase"],[126,55,137,47],[126,56,137,47,"sendMessageToFirebase"],[126,77,137,47],[126,79,137,48,"chatId"],[126,85,137,54],[126,87,137,56,"message"],[126,94,137,63],[126,95,137,64],[127,6,139,4],[127,10,139,8],[127,11,139,9,"isMountedRef"],[127,23,139,21],[127,24,139,22,"current"],[127,31,139,29],[127,33,139,31],[128,6,141,4],[128,10,141,8,"success"],[128,17,141,15],[128,19,141,17],[129,8,142,6],[130,8,143,6],[130,14,143,12],[130,18,143,12,"updateMessageStatusLocally"],[130,41,143,38],[130,42,143,38,"updateMessageStatusLocally"],[130,68,143,38],[130,70,143,39,"chatId"],[130,76,143,45],[130,78,143,47,"message"],[130,85,143,54],[130,86,143,55,"id"],[130,88,143,57],[130,90,143,59],[130,96,143,65],[130,97,143,66],[131,8,144,6,"setMessages"],[131,19,144,17],[131,20,144,18,"prev"],[131,24,144,22],[131,28,144,26],[132,10,145,8],[132,16,145,14,"idx"],[132,19,145,17],[132,22,145,20,"prev"],[132,26,145,24],[132,27,145,25,"findIndex"],[132,36,145,34],[132,37,145,35,"m"],[132,38,145,36],[132,42,145,40,"m"],[132,43,145,41],[132,44,145,42,"id"],[132,46,145,44],[132,51,145,49,"message"],[132,58,145,56],[132,59,145,57,"id"],[132,61,145,59],[132,62,145,60],[133,10,146,8],[133,14,146,12,"idx"],[133,17,146,15],[133,22,146,20],[133,23,146,21],[133,24,146,22],[133,26,146,24],[133,33,146,31,"prev"],[133,37,146,35],[134,10,147,8],[134,16,147,14,"updated"],[134,23,147,21],[134,26,147,24],[134,27,147,25],[134,30,147,28,"prev"],[134,34,147,32],[134,35,147,33],[135,10,148,8,"updated"],[135,17,148,15],[135,18,148,16,"idx"],[135,21,148,19],[135,22,148,20],[135,25,148,23],[136,12,148,25],[136,15,148,28,"updated"],[136,22,148,35],[136,23,148,36,"idx"],[136,26,148,39],[136,27,148,40],[137,12,148,42,"status"],[137,18,148,48],[137,20,148,50],[138,10,148,57],[138,11,148,58],[139,10,149,8],[139,17,149,15,"updated"],[139,24,149,22],[140,8,150,6],[140,9,150,7],[140,10,150,8],[141,6,151,4],[141,7,151,5],[141,13,151,11],[142,8,152,6],[143,8,153,6],[143,14,153,12],[143,18,153,12,"addToQueue"],[143,41,153,22],[143,42,153,22,"addToQueue"],[143,52,153,22],[143,54,153,23,"chatId"],[143,60,153,29],[143,62,153,31,"message"],[143,69,153,38],[143,70,153,39],[144,8,154,6],[144,14,154,12],[144,18,154,12,"updateMessageStatusLocally"],[144,41,154,38],[144,42,154,38,"updateMessageStatusLocally"],[144,68,154,38],[144,70,154,39,"chatId"],[144,76,154,45],[144,78,154,47,"message"],[144,85,154,54],[144,86,154,55,"id"],[144,88,154,57],[144,90,154,59],[144,98,154,67],[144,99,154,68],[145,8,155,6,"setMessages"],[145,19,155,17],[145,20,155,18,"prev"],[145,24,155,22],[145,28,155,26],[146,10,156,8],[146,16,156,14,"idx"],[146,19,156,17],[146,22,156,20,"prev"],[146,26,156,24],[146,27,156,25,"findIndex"],[146,36,156,34],[146,37,156,35,"m"],[146,38,156,36],[146,42,156,40,"m"],[146,43,156,41],[146,44,156,42,"id"],[146,46,156,44],[146,51,156,49,"message"],[146,58,156,56],[146,59,156,57,"id"],[146,61,156,59],[146,62,156,60],[147,10,157,8],[147,14,157,12,"idx"],[147,17,157,15],[147,22,157,20],[147,23,157,21],[147,24,157,22],[147,26,157,24],[147,33,157,31,"prev"],[147,37,157,35],[148,10,158,8],[148,16,158,14,"updated"],[148,23,158,21],[148,26,158,24],[148,27,158,25],[148,30,158,28,"prev"],[148,34,158,32],[148,35,158,33],[149,10,159,8,"updated"],[149,17,159,15],[149,18,159,16,"idx"],[149,21,159,19],[149,22,159,20],[149,25,159,23],[150,12,159,25],[150,15,159,28,"updated"],[150,22,159,35],[150,23,159,36,"idx"],[150,26,159,39],[150,27,159,40],[151,12,159,42,"status"],[151,18,159,48],[151,20,159,50],[152,10,159,59],[152,11,159,60],[153,10,160,8],[153,17,160,15,"updated"],[153,24,160,22],[154,8,161,6],[154,9,161,7],[154,10,161,8],[155,6,162,4],[156,4,163,2],[156,5,163,3],[156,7,163,5],[156,8,163,6,"chatId"],[156,14,163,12],[156,16,163,14,"currentUserPhone"],[156,32,163,30],[156,33,163,31],[156,34,163,32],[157,4,165,2],[157,11,165,9],[158,6,166,4,"messages"],[158,14,166,12],[159,6,167,4,"sendMessage"],[159,17,167,15],[160,6,168,4,"isLoading"],[160,15,168,13],[161,6,169,4,"isOnline"],[161,14,169,12],[162,6,170,4,"queueLength"],[162,17,170,15],[163,6,171,4,"chatId"],[164,4,172,2],[164,5,172,3],[165,2,173,0],[165,3,173,1],[166,0,173,2],[166,3]],"functionMap":{"names":["<global>","useChat","handleStatusUpdate","setMessages$argument_0","prev.findIndex$argument_0","useEffect$argument_0","loadMessages","localMessages.map$argument_0","subscribeToNewMessages$argument_2","prev.find$argument_0","sort$argument_0","<anonymous>","sendMessage"],"mappings":"AAA;uBCe;yCCU;kBCG;mCCC,uBD;ODK;GDE;YIK;yBCI;6DCW,SD;wCCU,gBD;QEM;wBLgB;4BMC,2BN;gDOC,mCP;aKC;SFE;KDG;WMO;KNO;GJC;kCWG;gBTgB,0BS;kBTa;mCCC,wBD;OSK;kBTK;mCCC,wBD;OSK;GXE;CDU"},"hasCjsExports":false},"type":"js/module"}]}