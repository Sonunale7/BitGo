{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/messageService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":13,"column":36,"index":309}}],"key":"BgocpR5elj5+H74kAotl+BD0mA8=","exportNames":["*"],"imports":1}},{"name":"../services/networkService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":310},"end":{"line":14,"column":70,"index":380}}],"key":"9oYCR1OK4qlJRMTdqxwx0Wbqa1Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useChat\", {\n    enumerable: true,\n    get: function () {\n      return useChat;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesMessageService = require(_dependencyMap[1], \"../services/messageService\");\n  var _servicesNetworkService = require(_dependencyMap[2], \"../services/networkService\");\n  const useChat = (currentUserPhone, otherUserPhone) => {\n    _s();\n    const [messages, setMessages] = (0, _react.useState)([]);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const chatId = (0, _servicesMessageService.getChatId)(currentUserPhone, otherUserPhone);\n    const unsubscribeRef = (0, _react.useRef)(null);\n    const knownMessageIdsRef = (0, _react.useRef)(new Set());\n    const isMountedRef = (0, _react.useRef)(true);\n    const isSubscribedRef = (0, _react.useRef)(false);\n\n    // Handle status updates from queue processor - update only the specific message\n    const handleStatusUpdate = (0, _react.useCallback)((messageId, msgChatId, status) => {\n      if (!isMountedRef.current) return;\n      if (msgChatId === chatId) {\n        setMessages(prev => {\n          const idx = prev.findIndex(m => m.id === messageId);\n          if (idx === -1 || prev[idx].status === status) return prev;\n          const updated = [...prev];\n          updated[idx] = {\n            ...updated[idx],\n            status\n          };\n          return updated;\n        });\n      }\n    }, [chatId]);\n    const {\n      isOnline,\n      queueLength\n    } = (0, _servicesNetworkService.useMessageQueueProcessor)(handleStatusUpdate);\n\n    // Load local messages on mount - no refetch on updates\n    (0, _react.useEffect)(() => {\n      isMountedRef.current = true;\n      isSubscribedRef.current = false;\n      const loadMessages = async () => {\n        if (!isMountedRef.current) return;\n        setIsLoading(true);\n        const localMessages = await (0, _servicesMessageService.getLocalMessages)(chatId);\n        if (!isMountedRef.current) return;\n        setMessages(localMessages);\n\n        // Build known message IDs set to prevent duplicates\n        knownMessageIdsRef.current = new Set(localMessages.map(m => m.id));\n        setIsLoading(false);\n\n        // Prevent duplicate listener subscription\n        if (isSubscribedRef.current) return;\n        isSubscribedRef.current = true;\n\n        // Subscribe to new messages from Firebase with limitToLast(30)\n        const lastTimestamp = localMessages.length > 0 ? Math.max(...localMessages.map(m => m.timestamp)) : 0;\n        unsubscribeRef.current = (0, _servicesMessageService.subscribeToNewMessages)(chatId, lastTimestamp, async newMessage => {\n          if (!isMountedRef.current) return;\n\n          // Skip if already known (duplicate prevention)\n          if (knownMessageIdsRef.current.has(newMessage.id)) {\n            return;\n          }\n\n          // Only add if not from current user (avoid duplicates)\n          if (newMessage.sender !== currentUserPhone) {\n            knownMessageIdsRef.current.add(newMessage.id);\n            await (0, _servicesMessageService.addMessageLocally)(chatId, newMessage);\n            if (!isMountedRef.current) return;\n\n            // Update state without refetching entire chat\n            setMessages(prev => {\n              if (prev.find(m => m.id === newMessage.id)) return prev;\n              return [...prev, newMessage].sort((a, b) => a.timestamp - b.timestamp);\n            });\n          }\n        }, knownMessageIdsRef.current);\n      };\n      if (currentUserPhone && otherUserPhone) {\n        loadMessages();\n      }\n\n      // Cleanup on unmount\n      return () => {\n        isMountedRef.current = false;\n        isSubscribedRef.current = false;\n        if (unsubscribeRef.current) {\n          unsubscribeRef.current();\n          unsubscribeRef.current = null;\n        }\n      };\n    }, [chatId, currentUserPhone, otherUserPhone]);\n\n    // Send message - local first approach, uses same messageId on retry\n    const sendMessage = (0, _react.useCallback)(async text => {\n      if (!text.trim() || !isMountedRef.current) return;\n      const messageId = (0, _servicesMessageService.generateMessageId)();\n      const message = {\n        id: messageId,\n        text: text.trim(),\n        sender: currentUserPhone,\n        timestamp: Date.now(),\n        status: 'sending'\n      };\n\n      // Track this message ID to prevent duplicates\n      knownMessageIdsRef.current.add(messageId);\n\n      // 1. Add to local state immediately (instant feedback)\n      setMessages(prev => [...prev, message]);\n\n      // 2. Save to local storage\n      await (0, _servicesMessageService.addMessageLocally)(chatId, message);\n\n      // 3. Try to send to Firebase (same messageId used for retry)\n      const success = await (0, _servicesMessageService.sendMessageToFirebase)(chatId, message);\n      if (!isMountedRef.current) return;\n      if (success) {\n        // Update only status, not refetch\n        await (0, _servicesMessageService.updateMessageStatusLocally)(chatId, message.id, 'sent');\n        setMessages(prev => {\n          const idx = prev.findIndex(m => m.id === message.id);\n          if (idx === -1) return prev;\n          const updated = [...prev];\n          updated[idx] = {\n            ...updated[idx],\n            status: 'sent'\n          };\n          return updated;\n        });\n      } else {\n        // Add to queue for retry - uses same messageId\n        await (0, _servicesMessageService.addToQueue)(chatId, message);\n        await (0, _servicesMessageService.updateMessageStatusLocally)(chatId, message.id, 'queued');\n        setMessages(prev => {\n          const idx = prev.findIndex(m => m.id === message.id);\n          if (idx === -1) return prev;\n          const updated = [...prev];\n          updated[idx] = {\n            ...updated[idx],\n            status: 'queued'\n          };\n          return updated;\n        });\n      }\n    }, [chatId, currentUserPhone]);\n    return {\n      messages,\n      sendMessage,\n      isLoading,\n      isOnline,\n      queueLength,\n      chatId\n    };\n  };\n  _s(useChat, \"1CJuTRph22CUXlBYeEfUo12mix4=\", false, function () {\n    return [_servicesNetworkService.useMessageQueueProcessor];\n  });\n});","lineCount":171,"map":[[8,2,16,0,"Object"],[8,8,16,0],[8,9,16,0,"defineProperty"],[8,23,16,0],[8,24,16,0,"exports"],[8,31,16,0],[9,4,16,0,"enumerable"],[9,14,16,0],[10,4,16,0,"get"],[10,7,16,0],[10,18,16,0,"get"],[10,19,16,0],[11,6,16,0],[11,13,16,0,"useChat"],[11,20,16,0],[12,4,16,0],[13,2,16,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_servicesMessageService"],[15,29,2,0],[15,32,2,0,"require"],[15,39,2,0],[15,40,2,0,"_dependencyMap"],[15,54,2,0],[16,2,14,0],[16,6,14,0,"_servicesNetworkService"],[16,29,14,0],[16,32,14,0,"require"],[16,39,14,0],[16,40,14,0,"_dependencyMap"],[16,54,14,0],[17,2,16,7],[17,8,16,13,"useChat"],[17,15,16,20],[17,18,16,23,"useChat"],[17,19,16,24,"currentUserPhone"],[17,35,16,48],[17,37,16,50,"otherUserPhone"],[17,51,16,72],[17,56,16,77],[18,4,16,77,"_s"],[18,6,16,77],[19,4,17,2],[19,10,17,8],[19,11,17,9,"messages"],[19,19,17,17],[19,21,17,19,"setMessages"],[19,32,17,30],[19,33,17,31],[19,36,17,34],[19,40,17,34,"useState"],[19,46,17,42],[19,47,17,42,"useState"],[19,55,17,42],[19,57,17,54],[19,59,17,56],[19,60,17,57],[20,4,18,2],[20,10,18,8],[20,11,18,9,"isLoading"],[20,20,18,18],[20,22,18,20,"setIsLoading"],[20,34,18,32],[20,35,18,33],[20,38,18,36],[20,42,18,36,"useState"],[20,48,18,44],[20,49,18,44,"useState"],[20,57,18,44],[20,59,18,45],[20,63,18,49],[20,64,18,50],[21,4,19,2],[21,10,19,8,"chatId"],[21,16,19,14],[21,19,19,17],[21,23,19,17,"getChatId"],[21,46,19,26],[21,47,19,26,"getChatId"],[21,56,19,26],[21,58,19,27,"currentUserPhone"],[21,74,19,43],[21,76,19,45,"otherUserPhone"],[21,90,19,59],[21,91,19,60],[22,4,20,2],[22,10,20,8,"unsubscribeRef"],[22,24,20,22],[22,27,20,25],[22,31,20,25,"useRef"],[22,37,20,31],[22,38,20,31,"useRef"],[22,44,20,31],[22,46,20,53],[22,50,20,57],[22,51,20,58],[23,4,21,2],[23,10,21,8,"knownMessageIdsRef"],[23,28,21,26],[23,31,21,29],[23,35,21,29,"useRef"],[23,41,21,35],[23,42,21,35,"useRef"],[23,48,21,35],[23,50,21,49],[23,54,21,53,"Set"],[23,57,21,56],[23,58,21,57],[23,59,21,58],[23,60,21,59],[24,4,22,2],[24,10,22,8,"isMountedRef"],[24,22,22,20],[24,25,22,23],[24,29,22,23,"useRef"],[24,35,22,29],[24,36,22,29,"useRef"],[24,42,22,29],[24,44,22,30],[24,48,22,34],[24,49,22,35],[25,4,23,2],[25,10,23,8,"isSubscribedRef"],[25,25,23,23],[25,28,23,26],[25,32,23,26,"useRef"],[25,38,23,32],[25,39,23,32,"useRef"],[25,45,23,32],[25,47,23,33],[25,52,23,38],[25,53,23,39],[27,4,25,2],[28,4,26,2],[28,10,26,8,"handleStatusUpdate"],[28,28,26,26],[28,31,26,29],[28,35,26,29,"useCallback"],[28,41,26,40],[28,42,26,40,"useCallback"],[28,53,26,40],[28,55,26,41],[28,56,26,42,"messageId"],[28,65,26,59],[28,67,26,61,"msgChatId"],[28,76,26,78],[28,78,26,80,"status"],[28,84,26,105],[28,89,26,110],[29,6,27,4],[29,10,27,8],[29,11,27,9,"isMountedRef"],[29,23,27,21],[29,24,27,22,"current"],[29,31,27,29],[29,33,27,31],[30,6,28,4],[30,10,28,8,"msgChatId"],[30,19,28,17],[30,24,28,22,"chatId"],[30,30,28,28],[30,32,28,30],[31,8,29,6,"setMessages"],[31,19,29,17],[31,20,29,18,"prev"],[31,24,29,22],[31,28,29,26],[32,10,30,8],[32,16,30,14,"idx"],[32,19,30,17],[32,22,30,20,"prev"],[32,26,30,24],[32,27,30,25,"findIndex"],[32,36,30,34],[32,37,30,35,"m"],[32,38,30,36],[32,42,30,40,"m"],[32,43,30,41],[32,44,30,42,"id"],[32,46,30,44],[32,51,30,49,"messageId"],[32,60,30,58],[32,61,30,59],[33,10,31,8],[33,14,31,12,"idx"],[33,17,31,15],[33,22,31,20],[33,23,31,21],[33,24,31,22],[33,28,31,26,"prev"],[33,32,31,30],[33,33,31,31,"idx"],[33,36,31,34],[33,37,31,35],[33,38,31,36,"status"],[33,44,31,42],[33,49,31,47,"status"],[33,55,31,53],[33,57,31,55],[33,64,31,62,"prev"],[33,68,31,66],[34,10,32,8],[34,16,32,14,"updated"],[34,23,32,21],[34,26,32,24],[34,27,32,25],[34,30,32,28,"prev"],[34,34,32,32],[34,35,32,33],[35,10,33,8,"updated"],[35,17,33,15],[35,18,33,16,"idx"],[35,21,33,19],[35,22,33,20],[35,25,33,23],[36,12,33,25],[36,15,33,28,"updated"],[36,22,33,35],[36,23,33,36,"idx"],[36,26,33,39],[36,27,33,40],[37,12,33,42,"status"],[38,10,33,49],[38,11,33,50],[39,10,34,8],[39,17,34,15,"updated"],[39,24,34,22],[40,8,35,6],[40,9,35,7],[40,10,35,8],[41,6,36,4],[42,4,37,2],[42,5,37,3],[42,7,37,5],[42,8,37,6,"chatId"],[42,14,37,12],[42,15,37,13],[42,16,37,14],[43,4,39,2],[43,10,39,8],[44,6,39,10,"isOnline"],[44,14,39,18],[45,6,39,20,"queueLength"],[46,4,39,32],[46,5,39,33],[46,8,39,36],[46,12,39,36,"useMessageQueueProcessor"],[46,35,39,60],[46,36,39,60,"useMessageQueueProcessor"],[46,60,39,60],[46,62,39,61,"handleStatusUpdate"],[46,80,39,79],[46,81,39,80],[48,4,41,2],[49,4,42,2],[49,8,42,2,"useEffect"],[49,14,42,11],[49,15,42,11,"useEffect"],[49,24,42,11],[49,26,42,12],[49,32,42,18],[50,6,43,4,"isMountedRef"],[50,18,43,16],[50,19,43,17,"current"],[50,26,43,24],[50,29,43,27],[50,33,43,31],[51,6,44,4,"isSubscribedRef"],[51,21,44,19],[51,22,44,20,"current"],[51,29,44,27],[51,32,44,30],[51,37,44,35],[52,6,46,4],[52,12,46,10,"loadMessages"],[52,24,46,22],[52,27,46,25],[52,33,46,25,"loadMessages"],[52,34,46,25],[52,39,46,37],[53,8,47,6],[53,12,47,10],[53,13,47,11,"isMountedRef"],[53,25,47,23],[53,26,47,24,"current"],[53,33,47,31],[53,35,47,33],[54,8,49,6,"setIsLoading"],[54,20,49,18],[54,21,49,19],[54,25,49,23],[54,26,49,24],[55,8,50,6],[55,14,50,12,"localMessages"],[55,27,50,25],[55,30,50,28],[55,36,50,34],[55,40,50,34,"getLocalMessages"],[55,63,50,50],[55,64,50,50,"getLocalMessages"],[55,80,50,50],[55,82,50,51,"chatId"],[55,88,50,57],[55,89,50,58],[56,8,52,6],[56,12,52,10],[56,13,52,11,"isMountedRef"],[56,25,52,23],[56,26,52,24,"current"],[56,33,52,31],[56,35,52,33],[57,8,54,6,"setMessages"],[57,19,54,17],[57,20,54,18,"localMessages"],[57,33,54,31],[57,34,54,32],[59,8,56,6],[60,8,57,6,"knownMessageIdsRef"],[60,26,57,24],[60,27,57,25,"current"],[60,34,57,32],[60,37,57,35],[60,41,57,39,"Set"],[60,44,57,42],[60,45,57,43,"localMessages"],[60,58,57,56],[60,59,57,57,"map"],[60,62,57,60],[60,63,57,61,"m"],[60,64,57,62],[60,68,57,66,"m"],[60,69,57,67],[60,70,57,68,"id"],[60,72,57,70],[60,73,57,71],[60,74,57,72],[61,8,59,6,"setIsLoading"],[61,20,59,18],[61,21,59,19],[61,26,59,24],[61,27,59,25],[63,8,61,6],[64,8,62,6],[64,12,62,10,"isSubscribedRef"],[64,27,62,25],[64,28,62,26,"current"],[64,35,62,33],[64,37,62,35],[65,8,63,6,"isSubscribedRef"],[65,23,63,21],[65,24,63,22,"current"],[65,31,63,29],[65,34,63,32],[65,38,63,36],[67,8,65,6],[68,8,66,6],[68,14,66,12,"lastTimestamp"],[68,27,66,25],[68,30,66,28,"localMessages"],[68,43,66,41],[68,44,66,42,"length"],[68,50,66,48],[68,53,66,51],[68,54,66,52],[68,57,67,10,"Math"],[68,61,67,14],[68,62,67,15,"max"],[68,65,67,18],[68,66,67,19],[68,69,67,22,"localMessages"],[68,82,67,35],[68,83,67,36,"map"],[68,86,67,39],[68,87,67,40,"m"],[68,88,67,41],[68,92,67,45,"m"],[68,93,67,46],[68,94,67,47,"timestamp"],[68,103,67,56],[68,104,67,57],[68,105,67,58],[68,108,68,10],[68,109,68,11],[69,8,70,6,"unsubscribeRef"],[69,22,70,20],[69,23,70,21,"current"],[69,30,70,28],[69,33,70,31],[69,37,70,31,"subscribeToNewMessages"],[69,60,70,53],[69,61,70,53,"subscribeToNewMessages"],[69,83,70,53],[69,85,71,8,"chatId"],[69,91,71,14],[69,93,72,8,"lastTimestamp"],[69,106,72,21],[69,108,73,8],[69,114,73,15,"newMessage"],[69,124,73,25],[69,128,73,30],[70,10,74,10],[70,14,74,14],[70,15,74,15,"isMountedRef"],[70,27,74,27],[70,28,74,28,"current"],[70,35,74,35],[70,37,74,37],[72,10,76,10],[73,10,77,10],[73,14,77,14,"knownMessageIdsRef"],[73,32,77,32],[73,33,77,33,"current"],[73,40,77,40],[73,41,77,41,"has"],[73,44,77,44],[73,45,77,45,"newMessage"],[73,55,77,55],[73,56,77,56,"id"],[73,58,77,58],[73,59,77,59],[73,61,77,61],[74,12,78,12],[75,10,79,10],[77,10,81,10],[78,10,82,10],[78,14,82,14,"newMessage"],[78,24,82,24],[78,25,82,25,"sender"],[78,31,82,31],[78,36,82,36,"currentUserPhone"],[78,52,82,52],[78,54,82,54],[79,12,83,12,"knownMessageIdsRef"],[79,30,83,30],[79,31,83,31,"current"],[79,38,83,38],[79,39,83,39,"add"],[79,42,83,42],[79,43,83,43,"newMessage"],[79,53,83,53],[79,54,83,54,"id"],[79,56,83,56],[79,57,83,57],[80,12,84,12],[80,18,84,18],[80,22,84,18,"addMessageLocally"],[80,45,84,35],[80,46,84,35,"addMessageLocally"],[80,63,84,35],[80,65,84,36,"chatId"],[80,71,84,42],[80,73,84,44,"newMessage"],[80,83,84,54],[80,84,84,55],[81,12,86,12],[81,16,86,16],[81,17,86,17,"isMountedRef"],[81,29,86,29],[81,30,86,30,"current"],[81,37,86,37],[81,39,86,39],[83,12,88,12],[84,12,89,12,"setMessages"],[84,23,89,23],[84,24,89,24,"prev"],[84,28,89,28],[84,32,89,32],[85,14,90,14],[85,18,90,18,"prev"],[85,22,90,22],[85,23,90,23,"find"],[85,27,90,27],[85,28,90,28,"m"],[85,29,90,29],[85,33,90,33,"m"],[85,34,90,34],[85,35,90,35,"id"],[85,37,90,37],[85,42,90,42,"newMessage"],[85,52,90,52],[85,53,90,53,"id"],[85,55,90,55],[85,56,90,56],[85,58,90,58],[85,65,90,65,"prev"],[85,69,90,69],[86,14,91,14],[86,21,91,21],[86,22,91,22],[86,25,91,25,"prev"],[86,29,91,29],[86,31,91,31,"newMessage"],[86,41,91,41],[86,42,91,42],[86,43,91,43,"sort"],[86,47,91,47],[86,48,91,48],[86,49,91,49,"a"],[86,50,91,50],[86,52,91,52,"b"],[86,53,91,53],[86,58,91,58,"a"],[86,59,91,59],[86,60,91,60,"timestamp"],[86,69,91,69],[86,72,91,72,"b"],[86,73,91,73],[86,74,91,74,"timestamp"],[86,83,91,83],[86,84,91,84],[87,12,92,12],[87,13,92,13],[87,14,92,14],[88,10,93,10],[89,8,94,8],[89,9,94,9],[89,11,95,8,"knownMessageIdsRef"],[89,29,95,26],[89,30,95,27,"current"],[89,37,96,6],[89,38,96,7],[90,6,97,4],[90,7,97,5],[91,6,99,4],[91,10,99,8,"currentUserPhone"],[91,26,99,24],[91,30,99,28,"otherUserPhone"],[91,44,99,42],[91,46,99,44],[92,8,100,6,"loadMessages"],[92,20,100,18],[92,21,100,19],[92,22,100,20],[93,6,101,4],[95,6,103,4],[96,6,104,4],[96,13,104,11],[96,19,104,17],[97,8,105,6,"isMountedRef"],[97,20,105,18],[97,21,105,19,"current"],[97,28,105,26],[97,31,105,29],[97,36,105,34],[98,8,106,6,"isSubscribedRef"],[98,23,106,21],[98,24,106,22,"current"],[98,31,106,29],[98,34,106,32],[98,39,106,37],[99,8,107,6],[99,12,107,10,"unsubscribeRef"],[99,26,107,24],[99,27,107,25,"current"],[99,34,107,32],[99,36,107,34],[100,10,108,8,"unsubscribeRef"],[100,24,108,22],[100,25,108,23,"current"],[100,32,108,30],[100,33,108,31],[100,34,108,32],[101,10,109,8,"unsubscribeRef"],[101,24,109,22],[101,25,109,23,"current"],[101,32,109,30],[101,35,109,33],[101,39,109,37],[102,8,110,6],[103,6,111,4],[103,7,111,5],[104,4,112,2],[104,5,112,3],[104,7,112,5],[104,8,112,6,"chatId"],[104,14,112,12],[104,16,112,14,"currentUserPhone"],[104,32,112,30],[104,34,112,32,"otherUserPhone"],[104,48,112,46],[104,49,112,47],[104,50,112,48],[106,4,114,2],[107,4,115,2],[107,10,115,8,"sendMessage"],[107,21,115,19],[107,24,115,22],[107,28,115,22,"useCallback"],[107,34,115,33],[107,35,115,33,"useCallback"],[107,46,115,33],[107,48,115,34],[107,54,115,41,"text"],[107,58,115,53],[107,62,115,73],[108,6,116,4],[108,10,116,8],[108,11,116,9,"text"],[108,15,116,13],[108,16,116,14,"trim"],[108,20,116,18],[108,21,116,19],[108,22,116,20],[108,26,116,24],[108,27,116,25,"isMountedRef"],[108,39,116,37],[108,40,116,38,"current"],[108,47,116,45],[108,49,116,47],[109,6,118,4],[109,12,118,10,"messageId"],[109,21,118,19],[109,24,118,22],[109,28,118,22,"generateMessageId"],[109,51,118,39],[109,52,118,39,"generateMessageId"],[109,69,118,39],[109,71,118,40],[109,72,118,41],[110,6,119,4],[110,12,119,10,"message"],[110,19,119,26],[110,22,119,29],[111,8,120,6,"id"],[111,10,120,8],[111,12,120,10,"messageId"],[111,21,120,19],[112,8,121,6,"text"],[112,12,121,10],[112,14,121,12,"text"],[112,18,121,16],[112,19,121,17,"trim"],[112,23,121,21],[112,24,121,22],[112,25,121,23],[113,8,122,6,"sender"],[113,14,122,12],[113,16,122,14,"currentUserPhone"],[113,32,122,30],[114,8,123,6,"timestamp"],[114,17,123,15],[114,19,123,17,"Date"],[114,23,123,21],[114,24,123,22,"now"],[114,27,123,25],[114,28,123,26],[114,29,123,27],[115,8,124,6,"status"],[115,14,124,12],[115,16,124,14],[116,6,125,4],[116,7,125,5],[118,6,127,4],[119,6,128,4,"knownMessageIdsRef"],[119,24,128,22],[119,25,128,23,"current"],[119,32,128,30],[119,33,128,31,"add"],[119,36,128,34],[119,37,128,35,"messageId"],[119,46,128,44],[119,47,128,45],[121,6,130,4],[122,6,131,4,"setMessages"],[122,17,131,15],[122,18,131,16,"prev"],[122,22,131,20],[122,26,131,24],[122,27,131,25],[122,30,131,28,"prev"],[122,34,131,32],[122,36,131,34,"message"],[122,43,131,41],[122,44,131,42],[122,45,131,43],[124,6,133,4],[125,6,134,4],[125,12,134,10],[125,16,134,10,"addMessageLocally"],[125,39,134,27],[125,40,134,27,"addMessageLocally"],[125,57,134,27],[125,59,134,28,"chatId"],[125,65,134,34],[125,67,134,36,"message"],[125,74,134,43],[125,75,134,44],[127,6,136,4],[128,6,137,4],[128,12,137,10,"success"],[128,19,137,17],[128,22,137,20],[128,28,137,26],[128,32,137,26,"sendMessageToFirebase"],[128,55,137,47],[128,56,137,47,"sendMessageToFirebase"],[128,77,137,47],[128,79,137,48,"chatId"],[128,85,137,54],[128,87,137,56,"message"],[128,94,137,63],[128,95,137,64],[129,6,139,4],[129,10,139,8],[129,11,139,9,"isMountedRef"],[129,23,139,21],[129,24,139,22,"current"],[129,31,139,29],[129,33,139,31],[130,6,141,4],[130,10,141,8,"success"],[130,17,141,15],[130,19,141,17],[131,8,142,6],[132,8,143,6],[132,14,143,12],[132,18,143,12,"updateMessageStatusLocally"],[132,41,143,38],[132,42,143,38,"updateMessageStatusLocally"],[132,68,143,38],[132,70,143,39,"chatId"],[132,76,143,45],[132,78,143,47,"message"],[132,85,143,54],[132,86,143,55,"id"],[132,88,143,57],[132,90,143,59],[132,96,143,65],[132,97,143,66],[133,8,144,6,"setMessages"],[133,19,144,17],[133,20,144,18,"prev"],[133,24,144,22],[133,28,144,26],[134,10,145,8],[134,16,145,14,"idx"],[134,19,145,17],[134,22,145,20,"prev"],[134,26,145,24],[134,27,145,25,"findIndex"],[134,36,145,34],[134,37,145,35,"m"],[134,38,145,36],[134,42,145,40,"m"],[134,43,145,41],[134,44,145,42,"id"],[134,46,145,44],[134,51,145,49,"message"],[134,58,145,56],[134,59,145,57,"id"],[134,61,145,59],[134,62,145,60],[135,10,146,8],[135,14,146,12,"idx"],[135,17,146,15],[135,22,146,20],[135,23,146,21],[135,24,146,22],[135,26,146,24],[135,33,146,31,"prev"],[135,37,146,35],[136,10,147,8],[136,16,147,14,"updated"],[136,23,147,21],[136,26,147,24],[136,27,147,25],[136,30,147,28,"prev"],[136,34,147,32],[136,35,147,33],[137,10,148,8,"updated"],[137,17,148,15],[137,18,148,16,"idx"],[137,21,148,19],[137,22,148,20],[137,25,148,23],[138,12,148,25],[138,15,148,28,"updated"],[138,22,148,35],[138,23,148,36,"idx"],[138,26,148,39],[138,27,148,40],[139,12,148,42,"status"],[139,18,148,48],[139,20,148,50],[140,10,148,57],[140,11,148,58],[141,10,149,8],[141,17,149,15,"updated"],[141,24,149,22],[142,8,150,6],[142,9,150,7],[142,10,150,8],[143,6,151,4],[143,7,151,5],[143,13,151,11],[144,8,152,6],[145,8,153,6],[145,14,153,12],[145,18,153,12,"addToQueue"],[145,41,153,22],[145,42,153,22,"addToQueue"],[145,52,153,22],[145,54,153,23,"chatId"],[145,60,153,29],[145,62,153,31,"message"],[145,69,153,38],[145,70,153,39],[146,8,154,6],[146,14,154,12],[146,18,154,12,"updateMessageStatusLocally"],[146,41,154,38],[146,42,154,38,"updateMessageStatusLocally"],[146,68,154,38],[146,70,154,39,"chatId"],[146,76,154,45],[146,78,154,47,"message"],[146,85,154,54],[146,86,154,55,"id"],[146,88,154,57],[146,90,154,59],[146,98,154,67],[146,99,154,68],[147,8,155,6,"setMessages"],[147,19,155,17],[147,20,155,18,"prev"],[147,24,155,22],[147,28,155,26],[148,10,156,8],[148,16,156,14,"idx"],[148,19,156,17],[148,22,156,20,"prev"],[148,26,156,24],[148,27,156,25,"findIndex"],[148,36,156,34],[148,37,156,35,"m"],[148,38,156,36],[148,42,156,40,"m"],[148,43,156,41],[148,44,156,42,"id"],[148,46,156,44],[148,51,156,49,"message"],[148,58,156,56],[148,59,156,57,"id"],[148,61,156,59],[148,62,156,60],[149,10,157,8],[149,14,157,12,"idx"],[149,17,157,15],[149,22,157,20],[149,23,157,21],[149,24,157,22],[149,26,157,24],[149,33,157,31,"prev"],[149,37,157,35],[150,10,158,8],[150,16,158,14,"updated"],[150,23,158,21],[150,26,158,24],[150,27,158,25],[150,30,158,28,"prev"],[150,34,158,32],[150,35,158,33],[151,10,159,8,"updated"],[151,17,159,15],[151,18,159,16,"idx"],[151,21,159,19],[151,22,159,20],[151,25,159,23],[152,12,159,25],[152,15,159,28,"updated"],[152,22,159,35],[152,23,159,36,"idx"],[152,26,159,39],[152,27,159,40],[153,12,159,42,"status"],[153,18,159,48],[153,20,159,50],[154,10,159,59],[154,11,159,60],[155,10,160,8],[155,17,160,15,"updated"],[155,24,160,22],[156,8,161,6],[156,9,161,7],[156,10,161,8],[157,6,162,4],[158,4,163,2],[158,5,163,3],[158,7,163,5],[158,8,163,6,"chatId"],[158,14,163,12],[158,16,163,14,"currentUserPhone"],[158,32,163,30],[158,33,163,31],[158,34,163,32],[159,4,165,2],[159,11,165,9],[160,6,166,4,"messages"],[160,14,166,12],[161,6,167,4,"sendMessage"],[161,17,167,15],[162,6,168,4,"isLoading"],[162,15,168,13],[163,6,169,4,"isOnline"],[163,14,169,12],[164,6,170,4,"queueLength"],[164,17,170,15],[165,6,171,4,"chatId"],[166,4,172,2],[166,5,172,3],[167,2,173,0],[167,3,173,1],[168,2,173,2,"_s"],[168,4,173,2],[168,5,16,13,"useChat"],[168,12,16,20],[169,4,16,20],[169,12,39,36,"useMessageQueueProcessor"],[169,35,39,60],[169,36,39,60,"useMessageQueueProcessor"],[169,60,39,60],[170,2,39,60],[171,0,39,60],[171,3]],"functionMap":{"names":["<global>","useChat","handleStatusUpdate","setMessages$argument_0","prev.findIndex$argument_0","useEffect$argument_0","loadMessages","localMessages.map$argument_0","subscribeToNewMessages$argument_2","prev.find$argument_0","sort$argument_0","<anonymous>","sendMessage"],"mappings":"AAA;uBCe;yCCU;kBCG;mCCC,uBD;ODK;GDE;YIK;yBCI;6DCW,SD;wCCU,gBD;QEM;wBLgB;4BMC,2BN;gDOC,mCP;aKC;SFE;KDG;WMO;KNO;GJC;kCWG;gBTgB,0BS;kBTa;mCCC,wBD;OSK;kBTK;mCCC,wBD;OSK;GXE;CDU"},"hasCjsExports":false},"type":"js/module"}]}