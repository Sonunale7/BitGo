{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"firebase/database","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":59,"index":59}}],"key":"ZF/J3nfk5GUgbzXl84BqV1IxYEE=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":60},"end":{"line":2,"column":46,"index":106}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":69,"index":176}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"saveUserLocally\", {\n    enumerable: true,\n    get: function () {\n      return saveUserLocally;\n    }\n  });\n  Object.defineProperty(exports, \"getUserFromLocal\", {\n    enumerable: true,\n    get: function () {\n      return getUserFromLocal;\n    }\n  });\n  Object.defineProperty(exports, \"saveUserToFirebase\", {\n    enumerable: true,\n    get: function () {\n      return saveUserToFirebase;\n    }\n  });\n  Object.defineProperty(exports, \"setUserOnlineStatus\", {\n    enumerable: true,\n    get: function () {\n      return setUserOnlineStatus;\n    }\n  });\n  Object.defineProperty(exports, \"clearLocalUser\", {\n    enumerable: true,\n    get: function () {\n      return clearLocalUser;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _firebaseDatabase = require(_dependencyMap[1], \"firebase/database\");\n  var _configFirebase = require(_dependencyMap[2], \"../config/firebase\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var USER_STORAGE_KEY = '@bitgo_user';\n  // Save user to local storage\n  var saveUserLocally = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (user) {\n      try {\n        yield AsyncStorage.default.setItem(USER_STORAGE_KEY, JSON.stringify(user));\n      } catch (error) {\n        throw error;\n      }\n    });\n    return function saveUserLocally(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  // Get user from local storage\n  var getUserFromLocal = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* () {\n      try {\n        var userData = yield AsyncStorage.default.getItem(USER_STORAGE_KEY);\n        return userData ? JSON.parse(userData) : null;\n      } catch (error) {\n        return null;\n      }\n    });\n    return function getUserFromLocal() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  // Save user to Firebase Realtime Database\n  var saveUserToFirebase = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator.default)(function* (user) {\n      try {\n        var userRef = (0, _firebaseDatabase.ref)(_configFirebase.database, `users/${user.phone}`);\n        yield (0, _firebaseDatabase.set)(userRef, {\n          name: user.name,\n          online: true\n        });\n\n        // Set up onDisconnect to mark user as offline when connection is lost\n        var onlineRef = (0, _firebaseDatabase.ref)(_configFirebase.database, `users/${user.phone}/online`);\n        yield (0, _firebaseDatabase.onDisconnect)(onlineRef).set(false);\n      } catch (error) {\n        throw error;\n      }\n    });\n    return function saveUserToFirebase(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  // Update user online status\n  var setUserOnlineStatus = /*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator.default)(function* (phone, online) {\n      try {\n        var onlineRef = (0, _firebaseDatabase.ref)(_configFirebase.database, `users/${phone}/online`);\n        yield (0, _firebaseDatabase.set)(onlineRef, online);\n      } catch (error) {\n        throw error;\n      }\n    });\n    return function setUserOnlineStatus(_x3, _x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  // Clear local user data (for logout)\n  var clearLocalUser = /*#__PURE__*/function () {\n    var _ref5 = (0, _asyncToGenerator.default)(function* () {\n      try {\n        yield AsyncStorage.default.removeItem(USER_STORAGE_KEY);\n      } catch (error) {\n        throw error;\n      }\n    });\n    return function clearLocalUser() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n});","lineCount":128,"map":[[12,2,13,0,"Object"],[12,8,13,0],[12,9,13,0,"defineProperty"],[12,23,13,0],[12,24,13,0,"exports"],[12,31,13,0],[13,4,13,0,"enumerable"],[13,14,13,0],[14,4,13,0,"get"],[14,7,13,0],[14,18,13,0,"get"],[14,19,13,0],[15,6,13,0],[15,13,13,0,"saveUserLocally"],[15,28,13,0],[16,4,13,0],[17,2,13,0],[18,2,22,0,"Object"],[18,8,22,0],[18,9,22,0,"defineProperty"],[18,23,22,0],[18,24,22,0,"exports"],[18,31,22,0],[19,4,22,0,"enumerable"],[19,14,22,0],[20,4,22,0,"get"],[20,7,22,0],[20,18,22,0,"get"],[20,19,22,0],[21,6,22,0],[21,13,22,0,"getUserFromLocal"],[21,29,22,0],[22,4,22,0],[23,2,22,0],[24,2,32,0,"Object"],[24,8,32,0],[24,9,32,0,"defineProperty"],[24,23,32,0],[24,24,32,0,"exports"],[24,31,32,0],[25,4,32,0,"enumerable"],[25,14,32,0],[26,4,32,0,"get"],[26,7,32,0],[26,18,32,0,"get"],[26,19,32,0],[27,6,32,0],[27,13,32,0,"saveUserToFirebase"],[27,31,32,0],[28,4,32,0],[29,2,32,0],[30,2,49,0,"Object"],[30,8,49,0],[30,9,49,0,"defineProperty"],[30,23,49,0],[30,24,49,0,"exports"],[30,31,49,0],[31,4,49,0,"enumerable"],[31,14,49,0],[32,4,49,0,"get"],[32,7,49,0],[32,18,49,0,"get"],[32,19,49,0],[33,6,49,0],[33,13,49,0,"setUserOnlineStatus"],[33,32,49,0],[34,4,49,0],[35,2,49,0],[36,2,59,0,"Object"],[36,8,59,0],[36,9,59,0,"defineProperty"],[36,23,59,0],[36,24,59,0,"exports"],[36,31,59,0],[37,4,59,0,"enumerable"],[37,14,59,0],[38,4,59,0,"get"],[38,7,59,0],[38,18,59,0,"get"],[38,19,59,0],[39,6,59,0],[39,13,59,0,"clearLocalUser"],[39,27,59,0],[40,4,59,0],[41,2,59,0],[42,2,65,2],[42,6,65,2,"_babelRuntimeHelpersAsyncToGenerator"],[42,42,65,2],[42,45,65,2,"require"],[42,52,65,2],[42,53,65,2,"_dependencyMap"],[42,67,65,2],[43,2,65,2],[43,6,65,2,"_asyncToGenerator"],[43,23,65,2],[43,26,65,2,"_interopDefault"],[43,41,65,2],[43,42,65,2,"_babelRuntimeHelpersAsyncToGenerator"],[43,78,65,2],[44,2,1,0],[44,6,1,0,"_firebaseDatabase"],[44,23,1,0],[44,26,1,0,"require"],[44,33,1,0],[44,34,1,0,"_dependencyMap"],[44,48,1,0],[45,2,2,0],[45,6,2,0,"_configFirebase"],[45,21,2,0],[45,24,2,0,"require"],[45,31,2,0],[45,32,2,0,"_dependencyMap"],[45,46,2,0],[46,2,3,0],[46,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[46,42,3,0],[46,45,3,0,"require"],[46,52,3,0],[46,53,3,0,"_dependencyMap"],[46,67,3,0],[47,2,3,0],[47,6,3,0,"AsyncStorage"],[47,18,3,0],[47,21,3,0,"_interopDefault"],[47,36,3,0],[47,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[47,73,3,0],[48,2,5,0],[48,6,5,6,"USER_STORAGE_KEY"],[48,22,5,22],[48,25,5,25],[48,38,5,38],[49,2,12,0],[50,2,13,7],[50,6,13,13,"saveUserLocally"],[50,21,13,28],[51,4,13,28],[51,8,13,28,"_ref"],[51,12,13,28],[51,19,13,28,"_asyncToGenerator"],[51,36,13,28],[51,37,13,28,"default"],[51,44,13,28],[51,46,13,31],[51,57,13,38,"user"],[51,61,13,48],[51,63,13,68],[52,6,14,2],[52,10,14,6],[53,8,15,4],[53,14,15,10,"AsyncStorage"],[53,26,15,22],[53,27,15,22,"default"],[53,34,15,22],[53,35,15,23,"setItem"],[53,42,15,30],[53,43,15,31,"USER_STORAGE_KEY"],[53,59,15,47],[53,61,15,49,"JSON"],[53,65,15,53],[53,66,15,54,"stringify"],[53,75,15,63],[53,76,15,64,"user"],[53,80,15,68],[53,81,15,69],[53,82,15,70],[54,6,16,2],[54,7,16,3],[54,8,16,4],[54,15,16,11,"error"],[54,20,16,16],[54,22,16,18],[55,8,17,4],[55,14,17,10,"error"],[55,19,17,15],[56,6,18,2],[57,4,19,0],[57,5,19,1],[58,4,19,1],[58,20,13,13,"saveUserLocally"],[58,35,13,28,"saveUserLocally"],[58,36,13,28,"_x"],[58,38,13,28],[59,6,13,28],[59,13,13,28,"_ref"],[59,17,13,28],[59,18,13,28,"apply"],[59,23,13,28],[59,30,13,28,"arguments"],[59,39,13,28],[60,4,13,28],[61,2,13,28],[61,5,19,1],[63,2,21,0],[64,2,22,7],[64,6,22,13,"getUserFromLocal"],[64,22,22,29],[65,4,22,29],[65,8,22,29,"_ref2"],[65,13,22,29],[65,20,22,29,"_asyncToGenerator"],[65,37,22,29],[65,38,22,29,"default"],[65,45,22,29],[65,47,22,32],[65,60,22,66],[66,6,23,2],[66,10,23,6],[67,8,24,4],[67,12,24,10,"userData"],[67,20,24,18],[67,29,24,27,"AsyncStorage"],[67,41,24,39],[67,42,24,39,"default"],[67,49,24,39],[67,50,24,40,"getItem"],[67,57,24,47],[67,58,24,48,"USER_STORAGE_KEY"],[67,74,24,64],[67,75,24,65],[68,8,25,4],[68,15,25,11,"userData"],[68,23,25,19],[68,26,25,22,"JSON"],[68,30,25,26],[68,31,25,27,"parse"],[68,36,25,32],[68,37,25,33,"userData"],[68,45,25,41],[68,46,25,42],[68,49,25,45],[68,53,25,49],[69,6,26,2],[69,7,26,3],[69,8,26,4],[69,15,26,11,"error"],[69,20,26,16],[69,22,26,18],[70,8,27,4],[70,15,27,11],[70,19,27,15],[71,6,28,2],[72,4,29,0],[72,5,29,1],[73,4,29,1],[73,20,22,13,"getUserFromLocal"],[73,36,22,29,"getUserFromLocal"],[73,37,22,29],[74,6,22,29],[74,13,22,29,"_ref2"],[74,18,22,29],[74,19,22,29,"apply"],[74,24,22,29],[74,31,22,29,"arguments"],[74,40,22,29],[75,4,22,29],[76,2,22,29],[76,5,29,1],[78,2,31,0],[79,2,32,7],[79,6,32,13,"saveUserToFirebase"],[79,24,32,31],[80,4,32,31],[80,8,32,31,"_ref3"],[80,13,32,31],[80,20,32,31,"_asyncToGenerator"],[80,37,32,31],[80,38,32,31,"default"],[80,45,32,31],[80,47,32,34],[80,58,32,41,"user"],[80,62,32,51],[80,64,32,71],[81,6,33,2],[81,10,33,6],[82,8,34,4],[82,12,34,10,"userRef"],[82,19,34,17],[82,22,34,20],[82,26,34,20,"ref"],[82,43,34,23],[82,44,34,23,"ref"],[82,47,34,23],[82,49,34,24,"database"],[82,64,34,32],[82,65,34,32,"database"],[82,73,34,32],[82,75,34,34],[82,84,34,43,"user"],[82,88,34,47],[82,89,34,48,"phone"],[82,94,34,53],[82,96,34,55],[82,97,34,56],[83,8,35,4],[83,14,35,10],[83,18,35,10,"set"],[83,35,35,13],[83,36,35,13,"set"],[83,39,35,13],[83,41,35,14,"userRef"],[83,48,35,21],[83,50,35,23],[84,10,36,6,"name"],[84,14,36,10],[84,16,36,12,"user"],[84,20,36,16],[84,21,36,17,"name"],[84,25,36,21],[85,10,37,6,"online"],[85,16,37,12],[85,18,37,14],[86,8,38,4],[86,9,38,5],[86,10,38,6],[88,8,40,4],[89,8,41,4],[89,12,41,10,"onlineRef"],[89,21,41,19],[89,24,41,22],[89,28,41,22,"ref"],[89,45,41,25],[89,46,41,25,"ref"],[89,49,41,25],[89,51,41,26,"database"],[89,66,41,34],[89,67,41,34,"database"],[89,75,41,34],[89,77,41,36],[89,86,41,45,"user"],[89,90,41,49],[89,91,41,50,"phone"],[89,96,41,55],[89,105,41,64],[89,106,41,65],[90,8,42,4],[90,14,42,10],[90,18,42,10,"onDisconnect"],[90,35,42,22],[90,36,42,22,"onDisconnect"],[90,48,42,22],[90,50,42,23,"onlineRef"],[90,59,42,32],[90,60,42,33],[90,61,42,34,"set"],[90,64,42,37],[90,65,42,38],[90,70,42,43],[90,71,42,44],[91,6,43,2],[91,7,43,3],[91,8,43,4],[91,15,43,11,"error"],[91,20,43,16],[91,22,43,18],[92,8,44,4],[92,14,44,10,"error"],[92,19,44,15],[93,6,45,2],[94,4,46,0],[94,5,46,1],[95,4,46,1],[95,20,32,13,"saveUserToFirebase"],[95,38,32,31,"saveUserToFirebase"],[95,39,32,31,"_x2"],[95,42,32,31],[96,6,32,31],[96,13,32,31,"_ref3"],[96,18,32,31],[96,19,32,31,"apply"],[96,24,32,31],[96,31,32,31,"arguments"],[96,40,32,31],[97,4,32,31],[98,2,32,31],[98,5,46,1],[100,2,48,0],[101,2,49,7],[101,6,49,13,"setUserOnlineStatus"],[101,25,49,32],[102,4,49,32],[102,8,49,32,"_ref4"],[102,13,49,32],[102,20,49,32,"_asyncToGenerator"],[102,37,49,32],[102,38,49,32,"default"],[102,45,49,32],[102,47,49,35],[102,58,49,42,"phone"],[102,63,49,55],[102,65,49,57,"online"],[102,71,49,72],[102,73,49,92],[103,6,50,2],[103,10,50,6],[104,8,51,4],[104,12,51,10,"onlineRef"],[104,21,51,19],[104,24,51,22],[104,28,51,22,"ref"],[104,45,51,25],[104,46,51,25,"ref"],[104,49,51,25],[104,51,51,26,"database"],[104,66,51,34],[104,67,51,34,"database"],[104,75,51,34],[104,77,51,36],[104,86,51,45,"phone"],[104,91,51,50],[104,100,51,59],[104,101,51,60],[105,8,52,4],[105,14,52,10],[105,18,52,10,"set"],[105,35,52,13],[105,36,52,13,"set"],[105,39,52,13],[105,41,52,14,"onlineRef"],[105,50,52,23],[105,52,52,25,"online"],[105,58,52,31],[105,59,52,32],[106,6,53,2],[106,7,53,3],[106,8,53,4],[106,15,53,11,"error"],[106,20,53,16],[106,22,53,18],[107,8,54,4],[107,14,54,10,"error"],[107,19,54,15],[108,6,55,2],[109,4,56,0],[109,5,56,1],[110,4,56,1],[110,20,49,13,"setUserOnlineStatus"],[110,39,49,32,"setUserOnlineStatus"],[110,40,49,32,"_x3"],[110,43,49,32],[110,45,49,32,"_x4"],[110,48,49,32],[111,6,49,32],[111,13,49,32,"_ref4"],[111,18,49,32],[111,19,49,32,"apply"],[111,24,49,32],[111,31,49,32,"arguments"],[111,40,49,32],[112,4,49,32],[113,2,49,32],[113,5,56,1],[115,2,58,0],[116,2,59,7],[116,6,59,13,"clearLocalUser"],[116,20,59,27],[117,4,59,27],[117,8,59,27,"_ref5"],[117,13,59,27],[117,20,59,27,"_asyncToGenerator"],[117,37,59,27],[117,38,59,27,"default"],[117,45,59,27],[117,47,59,30],[117,60,59,57],[118,6,60,2],[118,10,60,6],[119,8,61,4],[119,14,61,10,"AsyncStorage"],[119,26,61,22],[119,27,61,22,"default"],[119,34,61,22],[119,35,61,23,"removeItem"],[119,45,61,33],[119,46,61,34,"USER_STORAGE_KEY"],[119,62,61,50],[119,63,61,51],[120,6,62,2],[120,7,62,3],[120,8,62,4],[120,15,62,11,"error"],[120,20,62,16],[120,22,62,18],[121,8,63,4],[121,14,63,10,"error"],[121,19,63,15],[122,6,64,2],[123,4,65,0],[123,5,65,1],[124,4,65,1],[124,20,59,13,"clearLocalUser"],[124,34,59,27,"clearLocalUser"],[124,35,59,27],[125,6,59,27],[125,13,59,27,"_ref5"],[125,18,59,27],[125,19,59,27,"apply"],[125,24,59,27],[125,31,59,27,"arguments"],[125,40,59,27],[126,4,59,27],[127,2,59,27],[127,5,65,1],[128,0,65,2],[128,3]],"functionMap":{"names":["<global>","saveUserLocally","getUserFromLocal","saveUserToFirebase","setUserOnlineStatus","clearLocalUser"],"mappings":"AAA;+BCY;CDM;gCEG;CFO;kCGG;CHc;mCIG;CJO;8BKG;CLM"},"hasCjsExports":false},"type":"js/module"}]}